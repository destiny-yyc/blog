

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/blog/img/maple_leaf.png">
  <link rel="icon" href="/blog/img/maple_leaf.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="æ«ğŸå·">
  <meta name="keywords" content="">
  
    <meta name="description" content="ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯1. ä»£ç è¾“å‡ºç»“æœconst promise &#x3D; new Promise((resolve, reject) &#x3D;&gt; &amp;#123;   console.log(1);   console.log(2); &amp;#125;); promise.then(() &#x3D;&gt; &amp;#123;   console.log(3); &amp;#125;); console.log(4);  è¾“">
<meta property="og:type" content="article">
<meta property="og:title" content="é¢è¯•é¢˜æ±‡æ€»ä¹‹ä»£ç è¾“å‡º">
<meta property="og:url" content="https://destiny-yyc.github.io/interview-OutputCode.html">
<meta property="og:site_name" content="æ«ğŸå·çš„åšå®¢">
<meta property="og:description" content="ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯1. ä»£ç è¾“å‡ºç»“æœconst promise &#x3D; new Promise((resolve, reject) &#x3D;&gt; &amp;#123;   console.log(1);   console.log(2); &amp;#125;); promise.then(() &#x3D;&gt; &amp;#123;   console.log(3); &amp;#125;); console.log(4);  è¾“">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
<meta property="article:published_time" content="2022-08-19T16:00:00.000Z">
<meta property="article:modified_time" content="2023-03-24T08:04:12.302Z">
<meta property="article:author" content="æ«ğŸå·">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>é¢è¯•é¢˜æ±‡æ€»ä¹‹ä»£ç è¾“å‡º - æ«ğŸå·çš„åšå®¢</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/blog/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/blog/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/blog/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"destiny-yyc.github.io","root":"/blog/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/blog/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/blog/js/utils.js" ></script>
  <script  src="/blog/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/blog/">
      <strong>æ«ğŸå·çš„åšå®¢</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/blog/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="é¢è¯•é¢˜æ±‡æ€»ä¹‹ä»£ç è¾“å‡º"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        æ«ğŸå·
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-08-20 00:00" pubdate>
          2022å¹´8æœˆ20æ—¥
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          34k å­—
        
      </span>
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">é¢è¯•é¢˜æ±‡æ€»ä¹‹ä»£ç è¾“å‡º</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="ä¸€ã€å¼‚æ­¥-amp-äº‹ä»¶å¾ªç¯"><a href="#ä¸€ã€å¼‚æ­¥-amp-äº‹ä»¶å¾ªç¯" class="headerlink" title="ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯"></a>ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ"><a href="#1-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
&#125;);
promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
&#125;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span> 
<span class="hljs-number">2</span> 
<span class="hljs-number">4</span></code></pre></div>

<p>promise.then æ˜¯å¾®ä»»åŠ¡ï¼Œå®ƒä¼šåœ¨æ‰€æœ‰çš„å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰ä¼šæ‰§è¡Œï¼ŒåŒæ—¶éœ€è¦promiseå†…éƒ¨çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºè¿™é‡Œå†…éƒ¨æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸€ç›´å¤„äºpendingçŠ¶æ€ï¼Œæ‰€ä»¥ä¸è¾“å‡º3ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ"><a href="#2-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promise1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>)
  <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;resolve1&#x27;</span>)
&#125;)
<span class="hljs-keyword">const</span> promise2 = promise1.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)
&#125;)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;1&#x27;</span>, promise1);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;2&#x27;</span>, promise2);</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">promise1
<span class="hljs-number">1</span> <span class="hljs-title class_">Promise</span>&#123;&lt;resolved&gt;: resolve1&#125;
<span class="hljs-number">2</span> <span class="hljs-title class_">Promise</span>&#123;&lt;pending&gt;&#125;
resolve1</code></pre></div>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›´æ¥æ‰“å°promise1ï¼Œä¼šæ‰“å°å‡ºå®ƒçš„çŠ¶æ€å€¼å’Œå‚æ•°ã€‚</p>
<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>scriptæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œè¿™äº›ä»£ç ï¼›</li>
<li>é¦–å…ˆè¿›å…¥Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼Œæ‰“å°<code>promise1</code>ï¼›</li>
<li>ç¢°åˆ°<code>resolve</code>å‡½æ•°, å°†<code>promise1</code>çš„çŠ¶æ€æ”¹å˜ä¸º<code>resolved</code>, å¹¶å°†ç»“æœä¿å­˜ä¸‹æ¥ï¼›</li>
<li>ç¢°åˆ°<code>promise1.then</code>è¿™ä¸ªå¾®ä»»åŠ¡ï¼Œå°†å®ƒæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li><code>promise2</code>æ˜¯ä¸€ä¸ªæ–°çš„çŠ¶æ€ä¸º<code>pending</code>çš„<code>Promise</code>ï¼›</li>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç 1ï¼Œ åŒæ—¶æ‰“å°å‡º<code>promise1</code>çš„çŠ¶æ€æ˜¯<code>resolved</code>ï¼›</li>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç 2ï¼ŒåŒæ—¶æ‰“å°å‡º<code>promise2</code>çš„çŠ¶æ€æ˜¯<code>pending</code>ï¼›</li>
<li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥æ‰¾å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå‘ç°<code>promise1.then</code>è¿™ä¸ªå¾®ä»»åŠ¡ä¸”çŠ¶æ€ä¸º<code>resolved</code>ï¼Œæ‰§è¡Œå®ƒã€‚</li>
</ol>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ"><a href="#3-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ"></a>3. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;timerStart&quot;</span>);
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;success&quot;</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;timerEnd&quot;</span>);
  &#125;, <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
&#125;);
promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
&#125;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">4</span>
timerStart
timerEnd
success</code></pre></div>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆé‡åˆ°Promiseæ„é€ å‡½æ•°ï¼Œä¼šå…ˆæ‰§è¡Œé‡Œé¢çš„å†…å®¹ï¼Œæ‰“å°<code>1</code>ï¼›</li>
<li>é‡åˆ°å®šæ—¶å™¨<code>steTimeout</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œæ‰“å°å‡º2ï¼›</li>
<li>ç”±äº<code>Promise</code>çš„çŠ¶æ€æ­¤æ—¶è¿˜æ˜¯<code>pending</code>ï¼Œæ‰€ä»¥<code>promise.then</code>å…ˆä¸æ‰§è¡Œï¼›</li>
<li>ç»§ç»­æ‰§è¡Œä¸‹é¢çš„åŒæ­¥ä»»åŠ¡ï¼Œæ‰“å°å‡º4ï¼›</li>
<li>æ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—æ²¡æœ‰ä»»åŠ¡ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€è½®å®ä»»åŠ¡ï¼Œæ‰§è¡Œ<code>steTimeout</code>ï¼›</li>
<li>é¦–å…ˆæ‰§è¡Œ<code>timerStart</code>ï¼Œç„¶åé‡åˆ°äº†<code>resolve</code>ï¼Œå°†<code>promise</code>çš„çŠ¶æ€æ”¹ä¸º<code>resolved</code>ä¸”ä¿å­˜ç»“æœå¹¶å°†ä¹‹å‰çš„<code>promise.then</code>æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡Œ<code>timerEnd</code>ï¼›</li>
<li>æ‰§è¡Œå®Œè¿™ä¸ªå®ä»»åŠ¡ï¼Œå°±å»æ‰§è¡Œå¾®ä»»åŠ¡<code>promise.then</code>ï¼Œæ‰“å°å‡º<code>resolve</code>çš„ç»“æœã€‚</li>
</ul>
<h3 id="4-ä»£ç è¾“å‡ºç»“æœ"><a href="#4-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ"></a>4. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>);
  <span class="hljs-keyword">const</span> timer2 = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer2&#x27;</span>)
  &#125;, <span class="hljs-number">0</span>)
&#125;);
<span class="hljs-keyword">const</span> timer1 = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer1&#x27;</span>)
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise2&#x27;</span>)
  &#125;)
&#125;, <span class="hljs-number">0</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;start&#x27;</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">start
promise1
timer1
promise2
timer2</code></pre></div>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œ<code>Promise.resolve().then</code>æ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ŒåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>æ‰§è¡Œtimer1ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ŒåŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>ç»§ç»­æ‰§è¡Œä¸‹é¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º<code>start</code></li>
<li>è¿™æ ·ç¬¬ä¸€è½®å®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡<code>Promise.resolve().then</code>ï¼Œæ‰“å°å‡º<code>promise1</code></li>
<li>é‡åˆ°<code>timer2</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶å®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸¤ä¸ªä»»åŠ¡ï¼Œåˆ†åˆ«æ˜¯<code>timer1</code>ã€<code>timer2</code>ï¼›</li>
<li>è¿™æ ·ç¬¬ä¸€è½®å¾®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒè½®å®ä»»åŠ¡ï¼Œé¦–å…ˆæ‰§è¡Œå®šæ—¶å™¨<code>timer1</code>ï¼Œæ‰“å°<code>timer1</code>ï¼›</li>
<li>é‡åˆ°<code>Promise.resolve().then</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ŒåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œæ‰“å°<code>promise2</code>ï¼›</li>
<li>æœ€åæ‰§è¡Œå®ä»»åŠ¡<code>timer2</code>å®šæ—¶å™¨ï¼Œæ‰“å°å‡º<code>timer2</code>ï¼›</li>
</ol>
<h3 id="5-ä»£ç è¾“å‡ºç»“æœ"><a href="#5-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="5. ä»£ç è¾“å‡ºç»“æœ"></a>5. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;success1&#x27;</span>);
    <span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;error&#x27;</span>);
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;success2&#x27;</span>);
&#125;);
promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;then:&#x27;</span>, res);
&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;catch:&#x27;</span>, err);
&#125;)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">thenï¼šsuccess1</code></pre></div>

<p>è¿™ä¸ªé¢˜ç›®è€ƒå¯Ÿçš„å°±æ˜¯<strong>Promiseçš„çŠ¶æ€åœ¨å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œå°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–</strong>ã€‚å¼€å§‹çŠ¶æ€ç”±<code>pending</code>å˜ä¸º<code>resolve</code>ï¼Œè¯´æ˜å·²ç»å˜ä¸ºå·²å®ŒæˆçŠ¶æ€ï¼Œä¸‹é¢çš„ä¸¤ä¸ªçŠ¶æ€çš„å°±ä¸ä¼šå†æ‰§è¡Œï¼ŒåŒæ—¶ä¸‹é¢çš„catchä¹Ÿä¸ä¼šæ•è·åˆ°é”™è¯¯ã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ"><a href="#6-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ"></a>6. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-number">2</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
<span class="hljs-title class_">Promise</span> &#123;&lt;fulfilled&gt;: <span class="hljs-literal">undefined</span>&#125;</code></pre></div>

<p>Promise.resolveæ–¹æ³•çš„å‚æ•°å¦‚æœæ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™Promise.resolveæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼ŒçŠ¶æ€ä¸ºresolvedï¼ŒPromise.resolveæ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŒæ—¶ä¼ ç»™å›è°ƒå‡½æ•°ã€‚</p>
<p>thenæ–¹æ³•æ¥å—çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œè€Œå¦‚æœä¼ é€’çš„å¹¶éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®é™…ä¸Šä¼šå°†å…¶è§£é‡Šä¸ºthen(null)ï¼Œè¿™å°±ä¼šå¯¼è‡´å‰ä¸€ä¸ªPromiseçš„ç»“æœä¼šä¼ é€’ä¸‹é¢ã€‚</p>
<h3 id="7-ä»£ç è¾“å‡ºç»“æœ"><a href="#7-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="7. ä»£ç è¾“å‡ºç»“æœ"></a>7. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promise1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;success&#x27;</span>)
  &#125;, <span class="hljs-number">1000</span>)
&#125;)
<span class="hljs-keyword">const</span> promise2 = promise1.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;error!!!&#x27;</span>)
&#125;)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>, promise1)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise2&#x27;</span>, promise2)
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>, promise1)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise2&#x27;</span>, promise2)
&#125;, <span class="hljs-number">2000</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">promise1 <span class="hljs-title class_">Promise</span> &#123;&lt;pending&gt;&#125;
promise2 <span class="hljs-title class_">Promise</span> &#123;&lt;pending&gt;&#125;

<span class="hljs-title class_">Uncaught</span> (<span class="hljs-keyword">in</span> promise) <span class="hljs-title class_">Error</span>: error!!!
promise1 <span class="hljs-title class_">Promise</span> &#123;&lt;fulfilled&gt;: <span class="hljs-string">&quot;success&quot;</span>&#125;
promise2 <span class="hljs-title class_">Promise</span> &#123;&lt;rejected&gt;: <span class="hljs-title class_">Error</span>: error!!&#125;</code></pre></div>

<h3 id="8-ä»£ç è¾“å‡ºç»“æœ"><a href="#8-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="8. ä»£ç è¾“å‡ºç»“æœ"></a>8. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
  &#125;)
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;
  &#125;)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
  &#125;);</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>   
<span class="hljs-number">2</span></code></pre></div>

<p>Promiseæ˜¯å¯ä»¥é“¾å¼è°ƒç”¨çš„ï¼Œç”±äºæ¯æ¬¡è°ƒç”¨ <code>.then</code> æˆ–è€… <code>.catch</code> éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨, å®ƒå¹¶ä¸åƒä¸€èˆ¬ä»»åŠ¡çš„é“¾å¼è°ƒç”¨ä¸€æ ·return thisã€‚</p>
<p>ä¸Šé¢çš„è¾“å‡ºç»“æœä¹‹æ‰€ä»¥ä¾æ¬¡æ‰“å°å‡º1å’Œ2ï¼Œæ˜¯å› ä¸º<code>resolve(1)</code>ä¹‹åèµ°çš„æ˜¯ç¬¬ä¸€ä¸ªthenæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è¿›catché‡Œï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªthenä¸­çš„reså¾—åˆ°çš„å®é™…ä¸Šæ˜¯ç¬¬ä¸€ä¸ªthençš„è¿”å›å€¼ã€‚å¹¶ä¸”return 2ä¼šè¢«åŒ…è£…æˆ<code>resolve(2)</code>ï¼Œè¢«æœ€åçš„thenæ‰“å°è¾“å‡º2ã€‚</p>
<h3 id="9-ä»£ç è¾“å‡ºç»“æœ"><a href="#9-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="9. ä»£ç è¾“å‡ºç»“æœ"></a>9. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;error!!!&#x27;</span>)
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;then: &quot;</span>, res)
&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;catch: &quot;</span>, err)
&#125;)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-string">&quot;then: &quot;</span> <span class="hljs-string">&quot;Error: error!!!&quot;</span></code></pre></div>

<p>è¿”å›ä»»æ„ä¸€ä¸ªé promise çš„å€¼éƒ½ä¼šè¢«åŒ…è£¹æˆ promise å¯¹è±¡ï¼Œå› æ­¤è¿™é‡Œçš„<code>return new Error(&#39;error!!!&#39;)</code>ä¹Ÿè¢«åŒ…è£¹æˆäº†<code>return Promise.resolve(new Error(&#39;error!!!&#39;))</code>ï¼Œå› æ­¤å®ƒä¼šè¢«thenæ•è·è€Œä¸æ˜¯catchã€‚</p>
<h3 id="10-ä»£ç è¾“å‡ºç»“æœ"><a href="#10-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="10. ä»£ç è¾“å‡ºç»“æœ"></a>10. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> promise;
&#125;)
promise.<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">err</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Uncaught</span> (<span class="hljs-keyword">in</span> promise) <span class="hljs-title class_">TypeError</span>: <span class="hljs-title class_">Chaining</span> cycle detected <span class="hljs-keyword">for</span> promise #&lt;<span class="hljs-title class_">Promise</span>&gt;</code></pre></div>

<p>è¿™é‡Œå…¶å®æ˜¯ä¸€ä¸ªå‘ï¼Œ<code>.then</code> æˆ– <code>.catch</code> è¿”å›çš„å€¼ä¸èƒ½æ˜¯ promise æœ¬èº«ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯ã€‚</p>
<h3 id="11-ä»£ç è¾“å‡ºç»“æœ"><a href="#11-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="11. ä»£ç è¾“å‡ºç»“æœ"></a>11. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-number">2</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span></code></pre></div>

<p>çœ‹åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œå¥½å¤šçš„thenï¼Œå®é™…ä¸Šåªéœ€è¦è®°ä½ä¸€ä¸ªåŸåˆ™ï¼š<code>.then</code> æˆ–<code>.catch</code> çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿ<strong>å€¼é€ä¼ </strong>ã€‚</p>
<p>ç¬¬ä¸€ä¸ªthenå’Œç¬¬äºŒä¸ªthenä¸­ä¼ å…¥çš„éƒ½ä¸æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°å­—ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œå› æ­¤å‘ç”Ÿäº†é€ä¼ ï¼Œå°†<code>resolve(1)</code> çš„å€¼ç›´æ¥ä¼ åˆ°æœ€åä¸€ä¸ªthené‡Œï¼Œç›´æ¥æ‰“å°å‡º1ã€‚</p>
<h3 id="12-ä»£ç è¾“å‡ºç»“æœ"><a href="#12-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="12. ä»£ç è¾“å‡ºç»“æœ"></a>12. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;err!!!&#x27;</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;success&#x27;</span>, res)
  &#125;, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;error&#x27;</span>, err)
  &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;catch&#x27;</span>, err)
  &#125;)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">error err!!!</code></pre></div>

<p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>.then</code>å‡½æ•°ä¸­çš„ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨æ¥å¤„ç†PromiseæˆåŠŸçš„å‡½æ•°</li>
<li>ç¬¬äºŒä¸ªåˆ™æ˜¯å¤„ç†å¤±è´¥çš„å‡½æ•°</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´<code>Promise.resolve(&#39;1&#39;)</code>çš„å€¼ä¼šè¿›å…¥æˆåŠŸçš„å‡½æ•°ï¼Œ<code>Promise.reject(&#39;2&#39;)</code>çš„å€¼ä¼šè¿›å…¥å¤±è´¥çš„å‡½æ•°ã€‚</p>
<p>åœ¨è¿™é“é¢˜ä¸­ï¼Œé”™è¯¯ç›´æ¥è¢«<code>then</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ•è·äº†ï¼Œæ‰€ä»¥å°±ä¸ä¼šè¢«<code>catch</code>æ•è·äº†ï¼Œè¾“å‡ºç»“æœä¸ºï¼š<code>error err!!!&#39;</code></p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯åƒä¸‹é¢è¿™æ ·ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">success</span> (res) &#123;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;error!!!&#x27;</span>)
  &#125;, <span class="hljs-keyword">function</span> <span class="hljs-title function_">fail1</span> (err) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;fail1&#x27;</span>, err)
  &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">fail2</span> (err) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;fail2&#x27;</span>, err)
  &#125;)</code></pre></div>

<p>åœ¨<code>then</code>çš„ç¬¬ä¸€å‚æ•°ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œé‚£ä¹ˆä»–å°±ä¸ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°ä¸æ´»äº†ï¼Œè€Œæ˜¯è¢«åé¢çš„<code>catch</code>æ•è·åˆ°ã€‚</p>
<h3 id="13-ä»£ç è¾“å‡ºç»“æœ"><a href="#13-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="13. ä»£ç è¾“å‡ºç»“æœ"></a>13. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;1&#x27;</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)
  &#125;)
  .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;finally&#x27;</span>)
  &#125;)
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;2&#x27;</span>)
  .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;finally2&#x27;</span>)
  	<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æˆ‘æ˜¯finally2è¿”å›çš„å€¼&#x27;</span>
  &#125;)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;finally2åé¢çš„thenå‡½æ•°&#x27;</span>, res)
  &#125;)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
finally2
<span class="hljs-keyword">finally</span>
finally2åé¢çš„thenå‡½æ•° <span class="hljs-number">2</span></code></pre></div>

<p><code>.finally()</code>ä¸€èˆ¬ç”¨çš„å¾ˆå°‘ï¼Œåªè¦è®°ä½ä»¥ä¸‹å‡ ç‚¹å°±å¯ä»¥äº†ï¼š</p>
<ul>
<li><code>.finally()</code>æ–¹æ³•ä¸ç®¡Promiseå¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</li>
<li><code>.finally()</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨<code>.finally()</code>å‡½æ•°ä¸­æ˜¯æ— æ³•çŸ¥é“Promiseæœ€ç»ˆçš„çŠ¶æ€æ˜¯<code>resolved</code>è¿˜æ˜¯<code>rejected</code>çš„</li>
<li>å®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ªä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„Promiseå¯¹è±¡ã€‚</li>
<li>finallyæœ¬è´¨ä¸Šæ˜¯thenæ–¹æ³•çš„ç‰¹ä¾‹</li>
</ul>
<p><code>.finally()</code>çš„é”™è¯¯æ•è·ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;1&#x27;</span>)
  .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;finally1&#x27;</span>)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯finallyä¸­æŠ›å‡ºçš„å¼‚å¸¸&#x27;</span>)
  &#125;)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;finallyåé¢çš„thenå‡½æ•°&#x27;</span>, res)
  &#125;)
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;æ•è·é”™è¯¯&#x27;</span>, err)
  &#125;)</code></pre></div>

<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-string">&#x27;finally1&#x27;</span>
<span class="hljs-string">&#x27;æ•è·é”™è¯¯&#x27;</span> <span class="hljs-title class_">Error</span>: æˆ‘æ˜¯<span class="hljs-keyword">finally</span>ä¸­æŠ›å‡ºçš„å¼‚å¸¸</code></pre></div>

<h3 id="14-ä»£ç è¾“å‡ºç»“æœ"><a href="#14-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="14. ä»£ç è¾“å‡ºç»“æœ"></a>14. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">runAsync</span> (x) &#123;
    <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">r</span>(x, <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x)), <span class="hljs-number">1000</span>))
    <span class="hljs-keyword">return</span> p
&#125;

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">runAsync</span>(<span class="hljs-number">1</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">2</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">3</span>)]).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</code></pre></div>

<p>é¦–å…ˆï¼Œå®šä¹‰äº†ä¸€ä¸ªPromiseï¼Œæ¥å¼‚æ­¥æ‰§è¡Œå‡½æ•°runAsyncï¼Œè¯¥å‡½æ•°ä¼ å…¥ä¸€ä¸ªå€¼xï¼Œç„¶åé—´éš”ä¸€ç§’åæ‰“å°å‡ºè¿™ä¸ªxã€‚</p>
<p>ä¹‹åå†ä½¿ç”¨<code>Promise.all</code>æ¥æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œçš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€ç§’ä¹‹åè¾“å‡ºäº†1ï¼Œ2ï¼Œ3ï¼ŒåŒæ—¶è¾“å‡ºäº†æ•°ç»„[1, 2, 3]ï¼Œä¸‰ä¸ªå‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­è¿”å›äº†æ‰€æœ‰çš„ç»“æœã€‚å¹¶ä¸”ç»“æœå’Œå‡½æ•°çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸€è‡´çš„ã€‚</p>
<h3 id="15-ä»£ç è¾“å‡ºç»“æœ"><a href="#15-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="15. ä»£ç è¾“å‡ºç»“æœ"></a>15. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">runAsync</span> (x) &#123;
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">r</span>(x, <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x)), <span class="hljs-number">1000</span>))
  <span class="hljs-keyword">return</span> p
&#125;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">runReject</span> (x) &#123;
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">rej</span>(<span class="hljs-string">`Error: <span class="hljs-subst">$&#123;x&#125;</span>`</span>, <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x)), <span class="hljs-number">1000</span> * x))
  <span class="hljs-keyword">return</span> p
&#125;
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">runAsync</span>(<span class="hljs-number">1</span>), <span class="hljs-title function_">runReject</span>(<span class="hljs-number">4</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">3</span>), <span class="hljs-title function_">runReject</span>(<span class="hljs-number">2</span>)])
       .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))
       .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err))</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// 1såè¾“å‡º</span>
<span class="hljs-number">1</span>
<span class="hljs-number">3</span>
<span class="hljs-comment">// 2såè¾“å‡º</span>
<span class="hljs-number">2</span>
<span class="hljs-title class_">Error</span>: <span class="hljs-number">2</span>
<span class="hljs-comment">// 4såè¾“å‡º</span>
<span class="hljs-number">4</span></code></pre></div>

<p>å¯ä»¥çœ‹åˆ°ã€‚catchæ•è·åˆ°äº†ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œåœ¨è¿™é“é¢˜ç›®ä¸­æœ€å…ˆçš„é”™è¯¯å°±æ˜¯<code>runReject(2)</code>çš„ç»“æœã€‚å¦‚æœä¸€ç»„å¼‚æ­¥æ“ä½œä¸­æœ‰ä¸€ä¸ªå¼‚å¸¸éƒ½ä¸ä¼šè¿›å…¥<code>.then()</code>çš„ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å‚æ•°ä¸­ã€‚ä¼šè¢«<code>.then()</code>çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ•è·ã€‚</p>
<h3 id="16-ä»£ç è¾“å‡ºç»“æœ"><a href="#16-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="16. ä»£ç è¾“å‡ºç»“æœ"></a>16. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">runAsync</span> (x) &#123;
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">r</span>(x, <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x)), <span class="hljs-number">1000</span>))
  <span class="hljs-keyword">return</span> p
&#125;
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([<span class="hljs-title function_">runAsync</span>(<span class="hljs-number">1</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">2</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">3</span>)])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;result: &#x27;</span>, res))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err))</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
<span class="hljs-string">&#x27;result: &#x27;</span> <span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span></code></pre></div>

<p>thenåªä¼šæ•è·ç¬¬ä¸€ä¸ªæˆåŠŸçš„æ–¹æ³•ï¼Œå…¶ä»–çš„å‡½æ•°è™½ç„¶è¿˜ä¼šç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ä¸æ˜¯è¢«thenæ•è·äº†ã€‚</p>
<h3 id="17-ä»£ç è¾“å‡ºç»“æœ"><a href="#17-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="17. ä»£ç è¾“å‡ºç»“æœ"></a>17. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">runAsync</span>(<span class="hljs-params">x</span>) &#123;
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">r</span>(x, <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x)), <span class="hljs-number">1000</span>)
  );
  <span class="hljs-keyword">return</span> p;
&#125;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">runReject</span>(<span class="hljs-params">x</span>) &#123;
  <span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">rej</span>(<span class="hljs-string">`Error: <span class="hljs-subst">$&#123;x&#125;</span>`</span>, <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x)), <span class="hljs-number">1000</span> * x)
  );
  <span class="hljs-keyword">return</span> p;
&#125;
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([<span class="hljs-title function_">runReject</span>(<span class="hljs-number">0</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">1</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">2</span>), <span class="hljs-title function_">runAsync</span>(<span class="hljs-number">3</span>)])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;result: &quot;</span>, res))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err));</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">0</span>
<span class="hljs-title class_">Error</span>: <span class="hljs-number">0</span>
<span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span></code></pre></div>

<p>å¯ä»¥çœ‹åˆ°åœ¨catchæ•è·åˆ°ç¬¬ä¸€ä¸ªé”™è¯¯ä¹‹åï¼Œåé¢çš„ä»£ç è¿˜ä¸æ‰§è¡Œï¼Œä¸è¿‡ä¸ä¼šå†è¢«æ•è·äº†ã€‚</p>
<p>æ³¨æ„ï¼š<code>all</code>å’Œ<code>race</code>ä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢«thençš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„catchæ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</p>
<h3 id="18-ä»£ç è¾“å‡ºç»“æœ"><a href="#18-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="18. ä»£ç è¾“å‡ºç»“æœ"></a>18. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async1 start&quot;</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async1 end&quot;</span>);
&#125;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async2&quot;</span>);
&#125;
<span class="hljs-title function_">async1</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;start&#x27;</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">async1 start
async2
start
async1 end</code></pre></div>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œå‡½æ•°ä¸­çš„åŒæ­¥ä»£ç <code>async1 start</code>ï¼Œä¹‹åé‡åˆ°äº†<code>await</code>ï¼Œå®ƒä¼šé˜»å¡<code>async1</code>åé¢ä»£ç çš„æ‰§è¡Œï¼Œå› æ­¤ä¼šå…ˆå»æ‰§è¡Œ<code>async2</code>ä¸­çš„åŒæ­¥ä»£ç <code>async2</code>ï¼Œç„¶åè·³å‡º<code>async1</code>ï¼›</li>
<li>è·³å‡º<code>async1</code>å‡½æ•°åï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç <code>start</code>ï¼›</li>
<li>åœ¨ä¸€è½®å®ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œä¹‹åï¼Œå†æ¥æ‰§è¡Œ<code>await</code>åé¢çš„å†…å®¹<code>async1 end</code>ã€‚</li>
</ol>
<p>è¿™é‡Œå¯ä»¥ç†è§£ä¸ºawaitåé¢çš„è¯­å¥ç›¸å½“äºæ”¾åˆ°äº†new Promiseä¸­ï¼Œä¸‹ä¸€è¡ŒåŠä¹‹åçš„è¯­å¥ç›¸å½“äºæ”¾åœ¨Promise.thenä¸­ã€‚</p>
<h3 id="19-ä»£ç è¾“å‡ºç»“æœ"><a href="#19-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="19. ä»£ç è¾“å‡ºç»“æœ"></a>19. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async1 start&quot;</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async1 end&quot;</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer1&#x27;</span>)
  &#125;, <span class="hljs-number">0</span>)
&#125;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer2&#x27;</span>)
  &#125;, <span class="hljs-number">0</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async2&quot;</span>);
&#125;
<span class="hljs-title function_">async1</span>();
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer3&#x27;</span>)
&#125;, <span class="hljs-number">0</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;start&quot;</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">async1 start
async2
start
async1 end
timer2
timer3
timer1</code></pre></div>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆè¿›å…¥<code>async1</code>ï¼Œæ‰“å°å‡º<code>async1 start</code>ï¼›</li>
<li>ä¹‹åé‡åˆ°<code>async2</code>ï¼Œè¿›å…¥<code>async2</code>ï¼Œé‡åˆ°å®šæ—¶å™¨<code>timer2</code>ï¼ŒåŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹‹åæ‰“å°<code>async2</code>ï¼›</li>
<li>ç”±äº<code>async2</code>é˜»å¡äº†åé¢ä»£ç çš„æ‰§è¡Œï¼Œæ‰€ä»¥æ‰§è¡Œåé¢çš„å®šæ—¶å™¨<code>timer3</code>ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹‹åæ‰“å°<code>start</code>ï¼›</li>
<li>ç„¶åæ‰§è¡Œasync2åé¢çš„ä»£ç ï¼Œæ‰“å°å‡º<code>async1 end</code>ï¼Œé‡åˆ°å®šæ—¶å™¨timer1ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æœ€åï¼Œå®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸‰ä¸ªä»»åŠ¡ï¼Œå…ˆåé¡ºåºä¸º<code>timer2</code>ï¼Œ<code>timer3</code>ï¼Œ<code>timer1</code>ï¼Œæ²¡æœ‰å¾®ä»»åŠ¡ï¼Œæ‰€ä»¥ç›´æ¥æ‰€æœ‰çš„å®ä»»åŠ¡æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™æ‰§è¡Œã€‚</li>
</ol>
<h3 id="20-ä»£ç è¾“å‡ºç»“æœ"><a href="#20-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="20. ä»£ç è¾“å‡ºç»“æœ"></a>20. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span> () &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1 start&#x27;</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>)
  &#125;)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1 success&#x27;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;async1 end&#x27;</span>
&#125;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;srcipt start&#x27;</span>)
<span class="hljs-title function_">async1</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;srcipt end&#x27;</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">script start
async1 start
promise1
script end</code></pre></div>

<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨<code>async1</code>ä¸­<code>await</code>åé¢çš„Promiseæ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„çŠ¶æ€å§‹ç»ˆæ˜¯<code>pending</code>çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨<code>await</code>ä¹‹åçš„å†…å®¹æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼ŒåŒ…æ‹¬<code>async1</code>åé¢çš„ <code>.then</code>ã€‚</p>
<h3 id="21-ä»£ç è¾“å‡ºç»“æœ"><a href="#21-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="21. ä»£ç è¾“å‡ºç»“æœ"></a>21. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span> () &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1 start&#x27;</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>)
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;promise1 resolve&#x27;</span>)
  &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1 success&#x27;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;async1 end&#x27;</span>
&#125;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;srcipt start&#x27;</span>)
<span class="hljs-title function_">async1</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;srcipt end&#x27;</span>)</code></pre></div>

<p>è¿™é‡Œæ˜¯å¯¹ä¸Šé¢ä¸€é¢˜è¿›è¡Œäº†æ”¹é€ ï¼ŒåŠ ä¸Šäº†resolveã€‚</p>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">script start
async1 start
promise1
script end
promise1 resolve
async1 success
async1 end</code></pre></div>

<h3 id="22-ä»£ç è¾“å‡ºç»“æœ"><a href="#22-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="22. ä»£ç è¾“å‡ºç»“æœ"></a>22. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async1 start&quot;</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async1 end&quot;</span>);
&#125;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async2&quot;</span>);
&#125;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;script start&quot;</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;setTimeout&quot;</span>);
&#125;, <span class="hljs-number">0</span>);

<span class="hljs-title function_">async1</span>();

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise1&quot;</span>);
  <span class="hljs-title function_">resolve</span>();
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise2&quot;</span>);
&#125;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;script end&#x27;</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">script start
async1 start
async2
promise1
script end
async1 end
promise2
<span class="hljs-built_in">setTimeout</span></code></pre></div>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¼€å¤´å®šä¹‰äº†async1å’Œasync2ä¸¤ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å¹¶æœªæ‰§è¡Œï¼Œæ‰§è¡Œscriptä¸­çš„ä»£ç ï¼Œæ‰€ä»¥æ‰“å°å‡ºscript startï¼›</li>
<li>é‡åˆ°å®šæ—¶å™¨Settimeoutï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ä¹‹åæ‰§è¡Œå‡½æ•°async1ï¼Œé¦–å…ˆæ‰“å°å‡ºasync1 startï¼›</li>
<li>é‡åˆ°awaitï¼Œæ‰§è¡Œasync2ï¼Œæ‰“å°å‡ºasync2ï¼Œå¹¶é˜»æ–­åé¢ä»£ç çš„æ‰§è¡Œï¼Œå°†åé¢çš„ä»£ç åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ç„¶åè·³å‡ºasync1å’Œasync2ï¼Œé‡åˆ°Promiseï¼Œæ‰“å°å‡ºpromise1ï¼›</li>
<li>é‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæ‰§è¡Œåé¢çš„scriptä»£ç ï¼Œæ‰“å°å‡ºscript endï¼›</li>
<li>ä¹‹åå°±è¯¥æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—äº†ï¼Œé¦–å…ˆæ‰“å°å‡ºasync1 endï¼Œç„¶åæ‰“å°å‡ºpromise2ï¼›</li>
<li>æ‰§è¡Œå®Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°±å¼€å§‹æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å®šæ—¶å™¨ï¼Œæ‰“å°å‡ºsetTimeoutã€‚</li>
</ol>
<h3 id="23-ä»£ç è¾“å‡ºç»“æœ"><a href="#23-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="23. ä»£ç è¾“å‡ºç»“æœ"></a>23. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span> () &#123;
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1&#x27;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;async1 success&#x27;</span>
&#125;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span> () &#123;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async2&#x27;</span>)
    <span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
  &#125;)
&#125;
<span class="hljs-title function_">async1</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">async2
<span class="hljs-title class_">Uncaught</span> (<span class="hljs-keyword">in</span> promise) error</code></pre></div>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœasyncå‡½æ•°ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œå°±ä¼šç»ˆæ­¢é”™è¯¯ç»“æœï¼Œä¸ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</p>
<p>å¦‚æœæƒ³è¦è®©é”™è¯¯ä¸è¶³ä¹‹å¤„åé¢çš„ä»£ç æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨catchæ¥æ•è·ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span> () &#123;
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;error!!!&#x27;</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e))
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1&#x27;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;async1 success&#x27;</span>)
&#125;
<span class="hljs-title function_">async1</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;script start&#x27;</span>)</code></pre></div>

<p>è¿™æ ·çš„è¾“å‡ºç»“æœå°±æ˜¯ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">script start
error!!!
async1
async1 success</code></pre></div>

<h3 id="24-ä»£ç è¾“å‡ºç»“æœ"><a href="#24-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="24. ä»£ç è¾“å‡ºç»“æœ"></a>24. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">first</span> = (<span class="hljs-params"></span>) =&gt; (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
    <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">7</span>);
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">5</span>);
            <span class="hljs-title function_">resolve</span>(<span class="hljs-number">6</span>);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p)
        &#125;, <span class="hljs-number">0</span>)
        <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
    &#125;);
    <span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>);
    p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">arg</span>) =&gt;</span> &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg);
    &#125;);
&#125;));
<span class="hljs-title function_">first</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">arg</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg);
&#125;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">3</span>
<span class="hljs-number">7</span>
<span class="hljs-number">4</span>
<span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">5</span>
<span class="hljs-title class_">Promise</span>&#123;&lt;resolved&gt;: <span class="hljs-number">1</span>&#125;</code></pre></div>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆä¼šè¿›å…¥Promiseï¼Œæ‰“å°å‡º3ï¼Œä¹‹åè¿›å…¥ä¸‹é¢çš„Promiseï¼Œæ‰“å°å‡º7ï¼›</li>
<li>é‡åˆ°äº†å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡ŒPromise  pä¸­çš„resolveï¼ŒçŠ¶æ€å˜ä¸ºresolvedï¼Œè¿”å›å€¼ä¸º1ï¼›</li>
<li>æ‰§è¡ŒPromise firstä¸­çš„resolveï¼ŒçŠ¶æ€å˜ä¸ºresolvedï¼Œè¿”å›å€¼ä¸º2ï¼›</li>
<li>é‡åˆ°p.thenï¼Œå°†å…¶åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°first().thenï¼Œå°†å…¶åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œå¤–é¢çš„ä»£ç ï¼Œæ‰“å°å‡º4ï¼›</li>
<li>è¿™æ ·ç¬¬ä¸€è½®å®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå…ˆåæ‰“å°å‡º1å’Œ2ï¼›</li>
<li>è¿™æ ·å¾®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€è½®å®ä»»åŠ¡ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰§è¡Œå®ƒï¼Œæ‰“å°å‡º5ï¼Œç”±äºæ‰§è¡Œå·²ç»å˜ä¸ºresolvedçŠ¶æ€ï¼Œæ‰€ä»¥<code>resolve(6)</code>ä¸ä¼šå†æ‰§è¡Œï¼›</li>
<li>æœ€å<code>console.log(p)</code>æ‰“å°å‡º<code>Promise&#123;&lt;resolved&gt;: 1&#125;</code>ï¼›</li>
</ol>
<h3 id="25-ä»£ç è¾“å‡ºç»“æœ"><a href="#25-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="25. ä»£ç è¾“å‡ºç»“æœ"></a>25. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">async1</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1&#x27;</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer1&#x27;</span>)
  &#125;, <span class="hljs-number">2000</span>)
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>)
  &#125;)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1 end&#x27;</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;async1 success&#x27;</span>
&#125; 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;script start&#x27;</span>);
<span class="hljs-title function_">async1</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;script end&#x27;</span>);
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-number">2</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-number">4</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer2&#x27;</span>)
&#125;, <span class="hljs-number">1000</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">script start
async1
promise1
script end
<span class="hljs-number">1</span>
timer2
timer1</code></pre></div>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡ŒåŒæ­¥å¸¦å—ï¼Œæ‰“å°å‡ºscript startï¼›</li>
<li>é‡åˆ°å®šæ—¶å™¨timer1å°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ä¹‹åæ˜¯æ‰§è¡ŒPromiseï¼Œæ‰“å°å‡ºpromise1ï¼Œç”±äºPromiseæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥åé¢çš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼›</li>
<li>ç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œæ‰“å°å‡ºscript endï¼›</li>
<li>ç»§ç»­æ‰§è¡Œä¸‹é¢çš„Promiseï¼Œ.thenå’Œ.catchæœŸæœ›å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™é‡Œä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå› æ­¤å°±ä¼šå‘ç”Ÿå€¼æ¸—é€ï¼Œå°†resolve(1)çš„å€¼ä¼ åˆ°æœ€åä¸€ä¸ªthenï¼Œç›´æ¥æ‰“å°å‡º1ï¼›</li>
<li>é‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ŒæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œä¸¤ä¸ªå®šæ—¶å™¨ï¼Œä½†æ˜¯ç”±äºå®šæ—¶å™¨æ—¶é—´çš„åŸå› ï¼Œä¼šåœ¨ä¸¤ç§’åå…ˆæ‰“å°å‡ºtimer2ï¼Œåœ¨å››ç§’åæ‰“å°å‡ºtimer1ã€‚</li>
</ol>
<h3 id="26-ä»£ç è¾“å‡ºç»“æœ"><a href="#26-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="26. ä»£ç è¾“å‡ºç»“æœ"></a>26. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> &#123;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;resolve3&#x27;</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;timer1&#x27;</span>)
  &#125;, <span class="hljs-number">0</span>)
  <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;resovle1&#x27;</span>);
  <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;resolve2&#x27;</span>);
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)  <span class="hljs-comment">// resolve1</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p1)
  &#125;, <span class="hljs-number">1000</span>)
&#125;).<span class="hljs-title function_">finally</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;finally&#x27;</span>, res)
&#125;)</code></pre></div>

<p>æ‰§è¡Œç»“æœä¸ºå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">resolve1
<span class="hljs-keyword">finally</span>  <span class="hljs-literal">undefined</span>
timer1
<span class="hljs-title class_">Promise</span>&#123;&lt;resolved&gt;: <span class="hljs-literal">undefined</span>&#125;</code></pre></div>

<p>éœ€è¦æ³¨æ„çš„æ˜¯æœ€åä¸€ä¸ªå®šæ—¶å™¨æ‰“å°å‡ºçš„p1å…¶å®æ˜¯<code>.finally</code>çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬çŸ¥é“<code>.finally</code>çš„è¿”å›å€¼å¦‚æœåœ¨æ²¡æœ‰æŠ›å‡ºé”™è¯¯çš„æƒ…å†µä¸‹é»˜è®¤ä¼šæ˜¯ä¸Šä¸€ä¸ªPromiseçš„è¿”å›å€¼ï¼Œè€Œè¿™é“é¢˜ä¸­<code>.finally</code>ä¸Šä¸€ä¸ªPromiseæ˜¯<code>.then()</code>ï¼Œä½†æ˜¯è¿™ä¸ª<code>.then()</code>å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥p1æ‰“å°å‡ºæ¥çš„Promiseçš„å€¼ä¼šæ˜¯<code>undefined</code>ï¼Œå¦‚æœåœ¨å®šæ—¶å™¨çš„ä¸‹é¢åŠ ä¸Šä¸€ä¸ª<code>return 1</code>ï¼Œåˆ™å€¼å°±ä¼šå˜æˆ1ã€‚</p>
<h3 id="27-ä»£ç è¾“å‡ºç»“æœ"><a href="#27-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="27. ä»£ç è¾“å‡ºç»“æœ"></a>27. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;1&#x27;</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;2&#x27;</span>);
    process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;3&#x27;</span>);
    &#125;)
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;4&#x27;</span>);
        <span class="hljs-title function_">resolve</span>();
    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;5&#x27;</span>)
    &#125;)
&#125;)
process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;6&#x27;</span>);
&#125;)
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;7&#x27;</span>);
    <span class="hljs-title function_">resolve</span>();
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;8&#x27;</span>)
&#125;)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;9&#x27;</span>);
    process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;10&#x27;</span>);
    &#125;)
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;11&#x27;</span>);
        <span class="hljs-title function_">resolve</span>();
    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;12&#x27;</span>)
    &#125;)
&#125;)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
<span class="hljs-number">7</span>
<span class="hljs-number">6</span>
<span class="hljs-number">8</span>
<span class="hljs-number">2</span>
<span class="hljs-number">4</span>
<span class="hljs-number">3</span>
<span class="hljs-number">5</span>
<span class="hljs-number">9</span>
<span class="hljs-number">11</span>
<span class="hljs-number">10</span>
<span class="hljs-number">12</span></code></pre></div>

<p><strong>ï¼ˆ1ï¼‰ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æµç¨‹åˆ†æå¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œé‡åˆ°<code>console.log</code>ï¼Œè¾“å‡º1ã€‚</li>
<li>é‡åˆ°<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ã€‚æš‚ä¸”è®°ä¸º<code>setTimeout1</code>ã€‚</li>
<li>é‡åˆ°<code>process.nextTick()</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸º<code>process1</code>ã€‚</li>
<li>é‡åˆ°<code>Promise</code>ï¼Œ<code>new Promise</code>ç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º7ã€‚<code>then</code>è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸º<code>then1</code>ã€‚</li>
<li>åˆé‡åˆ°äº†<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>setTimeout2</code>ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>å®ä»»åŠ¡Event Queue</th>
<th>å¾®ä»»åŠ¡Event Queue</th>
</tr>
</thead>
<tbody><tr>
<td>setTimeout1</td>
<td>process1</td>
</tr>
<tr>
<td>setTimeout2</td>
<td>then1</td>
</tr>
</tbody></table>
<p>ä¸Šè¡¨æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸæ—¶å„Event Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡ºäº†1å’Œ7ã€‚å‘ç°äº†<code>process1</code>å’Œ<code>then1</code>ä¸¤ä¸ªå¾®ä»»åŠ¡ï¼š</p>
<ul>
<li>æ‰§è¡Œ<code>process1</code>ï¼Œè¾“å‡º6ã€‚</li>
<li>æ‰§è¡Œ<code>then1</code>ï¼Œè¾“å‡º8ã€‚</li>
</ul>
<p>ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æ­£å¼ç»“æŸï¼Œè¿™ä¸€è½®çš„ç»“æœæ˜¯è¾“å‡º1ï¼Œ7ï¼Œ6ï¼Œ8ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰ç¬¬äºŒè½®æ—¶é—´å¾ªç¯ä»</strong><code>**setTimeout1**</code><strong>å®ä»»åŠ¡å¼€å§‹ï¼š</strong></p>
<ul>
<li>é¦–å…ˆè¾“å‡º2ã€‚æ¥ä¸‹æ¥é‡åˆ°äº†<code>process.nextTick()</code>ï¼ŒåŒæ ·å°†å…¶åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>process2</code>ã€‚</li>
<li><code>new Promise</code>ç«‹å³æ‰§è¡Œè¾“å‡º4ï¼Œ<code>then</code>ä¹Ÿåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>then2</code>ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>å®ä»»åŠ¡Event Queue</th>
<th>å¾®ä»»åŠ¡Event Queue</th>
</tr>
</thead>
<tbody><tr>
<td>setTimeout2</td>
<td>process2</td>
</tr>
<tr>
<td></td>
<td>then2</td>
</tr>
</tbody></table>
<p>ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸï¼Œå‘ç°æœ‰<code>process2</code>å’Œ<code>then2</code>ä¸¤ä¸ªå¾®ä»»åŠ¡å¯ä»¥æ‰§è¡Œï¼š</p>
<ul>
<li>è¾“å‡º3ã€‚</li>
<li>è¾“å‡º5ã€‚</li>
</ul>
<p>ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬äºŒè½®è¾“å‡º2ï¼Œ4ï¼Œ3ï¼Œ5ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å¼€å§‹ï¼Œæ­¤æ—¶åªå‰©setTimeout2äº†ï¼Œæ‰§è¡Œã€‚</strong></p>
<ul>
<li>ç›´æ¥è¾“å‡º9ã€‚</li>
<li>å°†<code>process.nextTick()</code>åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸º<code>process3</code>ã€‚</li>
<li>ç›´æ¥æ‰§è¡Œ<code>new Promise</code>ï¼Œè¾“å‡º11ã€‚</li>
<li>å°†<code>then</code>åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>then3</code>ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>å®ä»»åŠ¡Event Queue</th>
<th>å¾®ä»»åŠ¡Event Queue</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>process3</td>
</tr>
<tr>
<td></td>
<td>then3</td>
</tr>
</tbody></table>
<p>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡<code>process3</code>å’Œ<code>then3</code>ï¼š</p>
<ul>
<li>è¾“å‡º10ã€‚</li>
<li>è¾“å‡º12ã€‚</li>
</ul>
<p>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬ä¸‰è½®è¾“å‡º9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚</p>
<p>æ•´æ®µä»£ç ï¼Œå…±è¿›è¡Œäº†ä¸‰æ¬¡äº‹ä»¶å¾ªç¯ï¼Œå®Œæ•´çš„è¾“å‡ºä¸º1ï¼Œ7ï¼Œ6ï¼Œ8ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ï¼Œ9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚</p>
<h3 id="28-ä»£ç è¾“å‡ºç»“æœ"><a href="#28-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="28. ä»£ç è¾“å‡ºç»“æœ"></a>28. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>)
&#125;)

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span>  &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>)
  <span class="hljs-title function_">resolve</span>(<span class="hljs-number">4</span>)
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(d))

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">5</span>)
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span>  &#123;
    <span class="hljs-title function_">resolve</span>(<span class="hljs-number">6</span>)
  &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(d))
&#125;)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">7</span>)
&#125;)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">8</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
<span class="hljs-number">3</span>
<span class="hljs-number">8</span>
<span class="hljs-number">4</span>
<span class="hljs-number">2</span>
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>
<span class="hljs-number">7</span></code></pre></div>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º1ï¼›</li>
<li>é‡åˆ°ç¬¬ä¸€ä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°Promiseï¼Œæ‰§è¡Œä»£ç ï¼Œæ‰“å°å‡º3ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°ç¬¬ä¸‰ä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ç»§ç»­æ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º8ï¼Œç¬¬ä¸€è½®æ‰§è¡Œç»“æŸï¼›</li>
<li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡ºç¬¬ä¸€ä¸ªPromiseçš„resolveç»“æœï¼š4ï¼›</li>
<li>å¼€å§‹æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º2ï¼›</li>
<li>æ­¤æ—¶æ²¡æœ‰å¾®ä»»åŠ¡ï¼Œç»§ç»­æ‰§è¡Œå®ä»»åŠ¡ä¸­çš„ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œé¦–å…ˆæ‰“å°å‡º5ï¼Œé‡åˆ°Promiseï¼Œé¦–é€‰æ‰“å°å‡º6ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º6ï¼›</li>
<li>æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æœ€åä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º7ã€‚</li>
</ol>
<h3 id="29-ä»£ç è¾“å‡ºç»“æœ"><a href="#29-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="29. ä»£ç è¾“å‡ºç»“æœ"></a>29. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
    
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>)
  &#125;);
&#125;);

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>)
  <span class="hljs-title function_">resolve</span>(<span class="hljs-number">5</span>)
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
&#125;)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">6</span>);
&#125;)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">7</span>);</code></pre></div>

<p>ä»£ç è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span>
<span class="hljs-number">4</span>
<span class="hljs-number">7</span>
<span class="hljs-number">5</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">6</span></code></pre></div>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œscripä»£ç ï¼Œæ‰“å°å‡º1ï¼›</li>
<li>é‡åˆ°ç¬¬ä¸€ä¸ªå®šæ—¶å™¨setTimeoutï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°Promiseï¼Œæ‰§è¡Œé‡Œé¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º4ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨setTimeoutï¼Œå°†å…¶åŠ å…¥åˆ°çº¢ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º7ï¼Œè‡³æ­¤ç¬¬ä¸€è½®æ‰§è¡Œå®Œæˆï¼›</li>
<li>æŒ‡å®šå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œæ‰“å°å‡ºresolveçš„ç»“æœï¼š5ï¼›</li>
<li>æ‰§è¡Œå®ä»»åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªå®šæ—¶å™¨setTimeoutï¼Œé¦–å…ˆæ‰“å°å‡º2ï¼Œç„¶åé‡åˆ° Promise.resolve().then()ï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œå®Œè¿™ä¸ªå®ä»»åŠ¡ï¼Œå°±å¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º3ï¼›</li>
<li>ç»§ç»­æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º6ã€‚</li>
</ol>
<h3 id="30-ä»£ç è¾“å‡ºç»“æœ"><a href="#30-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="30. ä»£ç è¾“å‡ºç»“æœ"></a>30. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;1&#x27;</span>);
    <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;Error&#x27;</span>;
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;2&#x27;</span>);
&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;3&#x27;</span>);
    <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;Error&#x27;</span>;
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;4&#x27;</span>);
&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;5&#x27;</span>);
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;6&#x27;</span>);
&#125;);</code></pre></div>

<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1</span> 
<span class="hljs-number">3</span> 
<span class="hljs-number">5</span> 
<span class="hljs-number">6</span></code></pre></div>

<p>åœ¨è¿™é“é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œæ— è®ºæ˜¯thneè¿˜æ˜¯catchä¸­ï¼Œåªè¦throw æŠ›å‡ºäº†é”™è¯¯ï¼Œå°±ä¼šè¢«catchæ•è·ï¼Œå¦‚æœæ²¡æœ‰throwå‡ºé”™è¯¯ï¼Œå°±è¢«ç»§ç»­æ‰§è¡Œåé¢çš„thenã€‚</p>
<h3 id="31-ä»£ç è¾“å‡ºç»“æœ"><a href="#31-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="31. ä»£ç è¾“å‡ºç»“æœ"></a>31. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
&#125;, <span class="hljs-number">100</span>);

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
  <span class="hljs-title function_">resolve</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>);
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resove, reject</span>) =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">5</span>);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span>  &#123;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">6</span>);
    &#125;, <span class="hljs-number">10</span>);
  &#125;)
&#125;);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">7</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">8</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">7</span>
<span class="hljs-number">8</span>
<span class="hljs-number">4</span>
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>
<span class="hljs-number">1</span></code></pre></div>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆé‡åˆ°å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°Promiseï¼Œé¦–å…ˆæ‰§è¡Œé‡Œé¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º2ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œåé¢åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º3ï¼›</li>
<li>ç»§ç»­æ‰§è¡Œscriptä¸­çš„ä»£ç ï¼Œæ‰“å°å‡º7å’Œ8ï¼Œè‡³æ­¤ç¬¬ä¸€è½®ä»£ç æ‰§è¡Œå®Œæˆï¼›</li>
<li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œé¦–å…ˆæ‰“å°å‡º4ï¼Œå¦‚é‡åˆ°Promiseï¼Œæ‰§è¡Œå…¶ä¸­çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º5ï¼Œé‡åˆ°å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸¤ä¸ªå®šæ—¶å™¨ï¼›</li>
<li>æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„æ˜¯çš„ç¬¬ä¸€ä¸ªå®šæ—¶å™¨çš„æ—¶é—´ä¸º100msï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨çš„æ—¶é—´ä¸º10msï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º6ï¼›</li>
<li>æ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œç»§ç»­æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º1ã€‚</li>
</ol>
<p>åšå®Œè¿™é“é¢˜ç›®ï¼Œæˆ‘ä»¬å°±éœ€è¦æ ¼å¤–æ³¨æ„ï¼Œæ¯ä¸ªå®šæ—¶å™¨çš„æ—¶é—´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å®šæ—¶å™¨çš„æ—¶é—´éƒ½ä¸º0å“¦ã€‚</p>
<h2 id="äºŒã€this"><a href="#äºŒã€this" class="headerlink" title="äºŒã€this"></a>äºŒã€this</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#1-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>( <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> );
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">doFoo</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-title function_">foo</span>();
&#125;

<span class="hljs-keyword">var</span> obj = &#123;
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">doFoo</span>: doFoo
&#125;;

<span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>; 
obj.<span class="hljs-title function_">doFoo</span>()</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š2</p>
<p>åœ¨Javascriptä¸­ï¼ŒthisæŒ‡å‘å‡½æ•°æ‰§è¡Œæ—¶çš„å½“å‰å¯¹è±¡ã€‚åœ¨æ‰§è¡Œfooçš„æ—¶å€™ï¼Œæ‰§è¡Œç¯å¢ƒå°±æ˜¯doFooå‡½æ•°ï¼Œæ‰§è¡Œç¯å¢ƒä¸ºå…¨å±€ã€‚æ‰€ä»¥ï¼Œfooä¸­çš„thisæ˜¯æŒ‡å‘windowçš„ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º2ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#2-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>
<span class="hljs-keyword">var</span> obj = &#123;
  <span class="hljs-attr">a</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">say</span>: <span class="hljs-function">() =&gt;</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>)
  &#125;
&#125;
obj.<span class="hljs-title function_">say</span>() 

<span class="hljs-keyword">var</span> anotherObj = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">30</span> &#125; 
obj.<span class="hljs-property">say</span>.<span class="hljs-title function_">apply</span>(anotherObj)</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š10  10</p>
<p>æˆ‘ä¹ˆçŸ¥é“ï¼Œç®­å¤´å‡½æ•°æ—¶ä¸ç»‘å®šthisçš„ï¼Œå®ƒçš„thisæ¥è‡ªåŸå…¶çˆ¶çº§æ‰€å¤„çš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥é¦–å…ˆä¼šæ‰“å°å…¨å±€ä¸­çš„ a çš„å€¼10ã€‚åé¢è™½ç„¶è®©sayæ–¹æ³•æŒ‡å‘äº†å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä»ä¸èƒ½æ”¹å˜ç®­å¤´å‡½æ•°çš„ç‰¹æ€§ï¼Œå®ƒçš„thisä»ç„¶æ˜¯æŒ‡å‘å…¨å±€çš„ï¼Œæ‰€ä»¥ä¾æ—§ä¼šè¾“å‡º10ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å®Œå…¨ä¸ä¸€æ ·çš„ç»“æœï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>  
<span class="hljs-keyword">var</span> obj = &#123;  
  <span class="hljs-attr">a</span>: <span class="hljs-number">20</span>,  
  <span class="hljs-title function_">say</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>)  
  &#125;  
&#125;  
obj.<span class="hljs-title function_">say</span>()   
<span class="hljs-keyword">var</span> anotherObj=&#123;<span class="hljs-attr">a</span>:<span class="hljs-number">30</span>&#125;   
obj.<span class="hljs-property">say</span>.<span class="hljs-title function_">apply</span>(anotherObj)</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š20 30</p>
<p>è¿™æ—¶ï¼Œsayæ–¹æ³•ä¸­çš„thiså°±ä¼šæŒ‡å‘ä»–æ‰€åœ¨çš„å¯¹è±¡ï¼Œè¾“å‡ºå…¶ä¸­çš„açš„å€¼ã€‚</p>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#3-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ"></a>3. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
&#125;
a.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>);</code></pre></div>

<p>æ‰“å°ç»“æœï¼šwindowå¯¹è±¡</p>
<p>æ ¹æ®ECMAScript262è§„èŒƒè§„å®šï¼šå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„å¯¹è±¡è°ƒç”¨è€…æ˜¯nullæˆ–è€…undefinedï¼Œcallæ–¹æ³•å°†æŠŠå…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸Šæ˜¯windowå¯¹è±¡ï¼‰ä½œä¸ºthisçš„å€¼ã€‚æ‰€ä»¥ï¼Œä¸ç®¡ä¼ å…¥null è¿˜æ˜¯ undefinedï¼Œå…¶thiséƒ½æ˜¯å…¨å±€å¯¹è±¡windowã€‚æ‰€ä»¥ï¼Œåœ¨æµè§ˆå™¨ä¸Šç­”æ¡ˆæ˜¯è¾“å‡º window å¯¹è±¡ã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œnull å°±æ˜¯ nullï¼Œundefined å°±æ˜¯ undefinedï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
&#125;
a.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// null</span>
a.<span class="hljs-title function_">call</span>(<span class="hljs-literal">undefined</span>); <span class="hljs-comment">// undefined</span></code></pre></div>

<h3 id="4-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#4-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ"></a>4. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = &#123; 
  name : <span class="hljs-string">&#x27;cuggz&#x27;</span>, 
  fun : <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123; 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); 
  &#125; 
&#125; 
obj.<span class="hljs-title function_">fun</span>()     <span class="hljs-comment">// cuggz</span>
<span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">fun</span>() <span class="hljs-comment">// undefined</span></code></pre></div>

<p>ä½¿ç”¨newæ„é€ å‡½æ•°æ—¶ï¼Œå…¶thisæŒ‡å‘çš„æ˜¯å…¨å±€ç¯å¢ƒwindowã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#6-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ"></a>6. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = &#123;
   <span class="hljs-attr">say</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
     <span class="hljs-keyword">var</span> <span class="hljs-title function_">f1</span> = (<span class="hljs-params"></span>) =&gt;  &#123;
       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;1111&quot;</span>, <span class="hljs-variable language_">this</span>);
     &#125;
     <span class="hljs-title function_">f1</span>();
   &#125;,
   <span class="hljs-attr">pro</span>: &#123;
     <span class="hljs-attr">getPro</span>:<span class="hljs-function">() =&gt;</span>  &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
     &#125;
   &#125;
&#125;
<span class="hljs-keyword">var</span> o = obj.<span class="hljs-property">say</span>;
<span class="hljs-title function_">o</span>();
obj.<span class="hljs-title function_">say</span>();
obj.<span class="hljs-property">pro</span>.<span class="hljs-title function_">getPro</span>();</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">1111</span> <span class="hljs-variable language_">window</span>å¯¹è±¡
<span class="hljs-number">1111</span> objå¯¹è±¡
<span class="hljs-variable language_">window</span>å¯¹è±¡</code></pre></div>

<p><strong>è§£æï¼š</strong></p>
<ol>
<li>o()ï¼Œoæ˜¯åœ¨å…¨å±€æ‰§è¡Œçš„ï¼Œè€Œf1æ˜¯ç®­å¤´å‡½æ•°ï¼Œå®ƒæ˜¯æ²¡æœ‰ç»‘å®šthisçš„ï¼Œå®ƒçš„thisæŒ‡å‘å…¶çˆ¶çº§çš„thisï¼Œå…¶çˆ¶çº§sayæ–¹æ³•çš„thisæŒ‡å‘çš„æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡ºwindowï¼›</li>
<li>obj.say()ï¼Œè°è°ƒç”¨sayï¼Œsay çš„thiså°±æŒ‡å‘è°ï¼Œæ‰€ä»¥æ­¤æ—¶thisæŒ‡å‘çš„æ˜¯objå¯¹è±¡ï¼›</li>
<li>obj.pro.getPro()ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œç®­å¤´å‡½æ•°æ—¶ä¸ç»‘å®šthisçš„ï¼ŒgetProå¤„äºproä¸­ï¼Œè€Œå¯¹è±¡ä¸æ„æˆå•ç‹¬çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥ç®­å¤´çš„å‡½æ•°çš„thiså°±æŒ‡å‘äº†å…¨å±€ä½œç”¨åŸŸwindowã€‚</li>
</ol>
<h3 id="7-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#7-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="7. ä»£ç è¾“å‡ºç»“æœ"></a>7. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> myObject = &#123;
    <span class="hljs-attr">foo</span>: <span class="hljs-string">&quot;bar&quot;</span>,
    <span class="hljs-attr">func</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-keyword">var</span> self = <span class="hljs-variable language_">this</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">foo</span>);  
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(self.<span class="hljs-property">foo</span>);  
        (<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">foo</span>);  
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(self.<span class="hljs-property">foo</span>);  
        &#125;());
    &#125;
&#125;;
myObject.<span class="hljs-title function_">func</span>();</code></pre></div>

<p>è¾“å‡ºç»“æœï¼šbar bar undefined bar</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>é¦–å…ˆfuncæ˜¯ç”±myObjectè°ƒç”¨çš„ï¼ŒthisæŒ‡å‘myObjectã€‚åˆå› ä¸ºvar self &#x3D; this;æ‰€ä»¥selfæŒ‡å‘myObjectã€‚</li>
<li>è¿™ä¸ªç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°è¡¨è¾¾å¼æ˜¯ç”±windowè°ƒç”¨çš„ï¼ŒthisæŒ‡å‘window ã€‚ç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸå¤„äºmyObject.funcçš„ä½œç”¨åŸŸä¸­ï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸæ‰¾ä¸åˆ°selfå˜é‡ï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾selfå˜é‡ï¼Œæ‰¾åˆ°äº†æŒ‡å‘ myObjectå¯¹è±¡çš„selfã€‚</li>
</ol>
<h3 id="8-ä»£ç è¾“å‡ºé—®é¢˜"><a href="#8-ä»£ç è¾“å‡ºé—®é¢˜" class="headerlink" title="8. ä»£ç è¾“å‡ºé—®é¢˜"></a>8. ä»£ç è¾“å‡ºé—®é¢˜</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-property">number</span> = <span class="hljs-number">2</span>;
<span class="hljs-keyword">var</span> obj = &#123;
 <span class="hljs-attr">number</span>: <span class="hljs-number">3</span>,
 <span class="hljs-attr">db1</span>: (<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
   <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span> *= <span class="hljs-number">4</span>;
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
     <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span> *= <span class="hljs-number">5</span>;
   &#125;
 &#125;)()
&#125;
<span class="hljs-keyword">var</span> db1 = obj.<span class="hljs-property">db1</span>;
<span class="hljs-title function_">db1</span>();
obj.<span class="hljs-title function_">db1</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">number</span>);     <span class="hljs-comment">// 15</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">number</span>);  <span class="hljs-comment">// 40</span></code></pre></div>

<p>è¿™é“é¢˜ç›®çœ‹æ¸…èµ·æ¥æœ‰ç‚¹ä¹±ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯è€ƒå¯ŸthisæŒ‡å‘çš„:</p>
<ol>
<li>æ‰§è¡Œdb1()æ—¶ï¼ŒthisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥window.number * 4 &#x3D; 8ï¼Œç„¶åæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œ æ‰€ä»¥window.number * 5 &#x3D; 40ï¼›</li>
<li>æ‰§è¡Œobj.db1();æ—¶ï¼ŒthisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œæ‰€ä»¥obj.numer * 5 &#x3D; 15ã€‚</li>
</ol>
<h3 id="9-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#9-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="9. ä»£ç è¾“å‡ºç»“æœ"></a>9. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> length = <span class="hljs-number">10</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>);
&#125;
 
<span class="hljs-keyword">var</span> obj = &#123;
  <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) &#123;
    <span class="hljs-title function_">fn</span>();
    <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]();
  &#125;
&#125;;
 
obj.<span class="hljs-title function_">method</span>(fn, <span class="hljs-number">1</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š 10 2</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>ç¬¬ä¸€æ¬¡æ‰§è¡Œfn()ï¼ŒthisæŒ‡å‘windowå¯¹è±¡ï¼Œè¾“å‡º10ã€‚</li>
<li>ç¬¬äºŒæ¬¡æ‰§è¡Œarguments<a href="https://link.juejin.cn/?target=">0</a>ï¼Œç›¸å½“äºargumentsè°ƒç”¨æ–¹æ³•ï¼ŒthisæŒ‡å‘argumentsï¼Œè€Œè¿™é‡Œä¼ äº†ä¸¤ä¸ªå‚æ•°ï¼Œæ•…è¾“å‡ºargumentsé•¿åº¦ä¸º2ã€‚</li>
</ol>
<h3 id="10-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#10-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="10. ä»£ç è¾“å‡ºç»“æœ"></a>10. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">printA</span>(<span class="hljs-params"></span>)&#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
&#125;
<span class="hljs-keyword">var</span> obj=&#123;
  <span class="hljs-attr">a</span>:<span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>:printA,
  <span class="hljs-attr">bar</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-title function_">printA</span>();
  &#125;
&#125;

obj.<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 2</span>
obj.<span class="hljs-title function_">bar</span>(); <span class="hljs-comment">// 1</span>
<span class="hljs-keyword">var</span> foo = obj.<span class="hljs-property">foo</span>;
<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// 1</span></code></pre></div>

<p>è¾“å‡ºç»“æœï¼š 2 1 1</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>obj.foo()ï¼Œfoo çš„thisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰€ä»¥aä¼šè¾“å‡º2ï¼›</li>
<li>obj.bar()ï¼ŒprintAåœ¨baræ–¹æ³•ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æ­¤æ—¶printAçš„thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›</li>
<li>foo()ï¼Œfooæ˜¯åœ¨å…¨å±€å¯¹è±¡ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›</li>
</ol>
<h3 id="11-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#11-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="11. ä»£ç è¾“å‡ºç»“æœ"></a>11. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> x = <span class="hljs-number">3</span>;
<span class="hljs-keyword">var</span> y = <span class="hljs-number">4</span>;
<span class="hljs-keyword">var</span> obj = &#123;
    <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">y</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">getX</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">5</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>;
        &#125;();
    &#125;,
    <span class="hljs-attr">getY</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-keyword">var</span> y = <span class="hljs-number">7</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>;
    &#125;
&#125;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">getX</span>()) <span class="hljs-comment">// 3</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">getY</span>()) <span class="hljs-comment">// 6</span></code></pre></div>

<p>è¾“å‡ºç»“æœï¼š3  6</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>æˆ‘ä»¬çŸ¥é“ï¼ŒåŒ¿åå‡½æ•°çš„thisæ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡çš„ï¼Œæ‰€ä»¥thisæŒ‡å‘windowï¼Œä¼šæ‰“å°å‡º3ï¼›</li>
<li>getYæ˜¯ç”±objè°ƒç”¨çš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘çš„æ˜¯objå¯¹è±¡ï¼Œä¼šæ‰“å°å‡º6ã€‚</li>
</ol>
<h3 id="12-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#12-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="12. ä»£ç è¾“å‡ºç»“æœ"></a>12. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>; 
<span class="hljs-keyword">var</span> obt = &#123; 
  <span class="hljs-attr">a</span>: <span class="hljs-number">20</span>, 
  <span class="hljs-attr">fn</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123; 
    <span class="hljs-keyword">var</span> a = <span class="hljs-number">30</span>; 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>)
  &#125; 
&#125;
obt.<span class="hljs-title function_">fn</span>();  <span class="hljs-comment">// 20</span>
obt.<span class="hljs-property">fn</span>.<span class="hljs-title function_">call</span>(); <span class="hljs-comment">// 10</span>
(obt.<span class="hljs-property">fn</span>)(); <span class="hljs-comment">// 20</span></code></pre></div>

<p>è¾“å‡ºç»“æœï¼š 20  10  20</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>obt.fn()ï¼Œfnæ˜¯ç”±obtè°ƒç”¨çš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘obtå¯¹è±¡ï¼Œä¼šæ‰“å°å‡º20ï¼›</li>
<li>obt.fn.call()ï¼Œè¿™é‡Œcallçš„å‚æ•°å•¥éƒ½æ²¡å†™ï¼Œå°±è¡¨ç¤ºnullï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœcallçš„å‚æ•°ä¸ºundefinedæˆ–nullï¼Œé‚£ä¹ˆthiså°±ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡thisï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º 10ï¼›</li>
<li>(obt.fn)()ï¼Œ è¿™é‡Œç»™è¡¨è¾¾å¼åŠ äº†æ‹¬å·ï¼Œè€Œæ‹¬å·çš„ä½œç”¨æ˜¯æ”¹å˜è¡¨è¾¾å¼çš„è¿ç®—é¡ºåºï¼Œè€Œåœ¨è¿™é‡ŒåŠ ä¸ä¸åŠ æ‹¬å·å¹¶æ— å½±å“ï¼›ç›¸å½“äº  obt.fn()ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º 20ï¼›</li>
</ol>
<h3 id="13-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#13-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="13. ä»£ç è¾“å‡ºç»“æœ"></a>13. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params">xx</span>)&#123;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = xx;
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>
&#125;;
<span class="hljs-keyword">var</span> x = <span class="hljs-title function_">a</span>(<span class="hljs-number">5</span>);
<span class="hljs-keyword">var</span> y = <span class="hljs-title function_">a</span>(<span class="hljs-number">6</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x.<span class="hljs-property">x</span>)  <span class="hljs-comment">// undefined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(y.<span class="hljs-property">x</span>)  <span class="hljs-comment">// 6</span></code></pre></div>

<p>è¾“å‡ºç»“æœï¼š undefined  6</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>æœ€å…³é”®çš„å°±æ˜¯var x &#x3D; a(5)ï¼Œå‡½æ•°aæ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè°ƒç”¨ï¼Œæ‰€ä»¥å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘windowå¯¹è±¡ã€‚<strong>æ‰€ä»¥ this.x &#x3D; 5 å°±ç›¸å½“äºï¼šwindow.x &#x3D; 5ã€‚</strong>ä¹‹å return thisï¼Œä¹Ÿå°±æ˜¯è¯´ var x &#x3D; a(5) ä¸­çš„xå˜é‡çš„å€¼æ˜¯windowï¼Œè¿™é‡Œçš„xå°†å‡½æ•°å†…éƒ¨çš„xçš„å€¼è¦†ç›–äº†ã€‚ç„¶åæ‰§è¡Œconsole.log(x.x)ï¼Œ ä¹Ÿå°±æ˜¯console.log(window.x)ï¼Œè€Œwindowå¯¹è±¡ä¸­æ²¡æœ‰xå±æ€§ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºundefinedã€‚</li>
<li>å½“æŒ‡å‘y.xæ—¶ï¼Œä¼šç»™å…¨å±€å˜é‡ä¸­çš„xèµ‹å€¼ä¸º6ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º6ã€‚</li>
</ol>
<h3 id="14-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#14-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="14. ä»£ç è¾“å‡ºç»“æœ"></a>14. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">something</span>)&#123;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = something
&#125;

<span class="hljs-keyword">var</span> obj1 = &#123;
    <span class="hljs-attr">foo</span>: foo
&#125;

<span class="hljs-keyword">var</span> obj2 = &#123;&#125;

obj1.<span class="hljs-title function_">foo</span>(<span class="hljs-number">2</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">a</span>); <span class="hljs-comment">// 2</span>

obj1.<span class="hljs-property">foo</span>.<span class="hljs-title function_">call</span>(obj2, <span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj2.<span class="hljs-property">a</span>); <span class="hljs-comment">// 3</span>

<span class="hljs-keyword">var</span> bar = <span class="hljs-keyword">new</span> obj1.<span class="hljs-title function_">foo</span>(<span class="hljs-number">4</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">a</span>); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-property">a</span>); <span class="hljs-comment">// 4</span></code></pre></div>

<p>è¾“å‡ºç»“æœï¼š 2  3  2  4</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œobj1.foo(2); ä¼šåœ¨objä¸­æ·»åŠ aå±æ€§ï¼Œå…¶å€¼ä¸º2ã€‚ä¹‹åæ‰§è¡Œobj1.aï¼Œaæ˜¯å³obj1è°ƒç”¨çš„ï¼Œæ‰€ä»¥thisæŒ‡å‘objï¼Œæ‰“å°å‡º2ï¼›</li>
<li>æ‰§è¡Œ obj1.foo.call(obj2, 3) æ—¶ï¼Œä¼šå°†fooçš„thisæŒ‡å‘obj2ï¼Œåé¢å°±å’Œä¸Šé¢ä¸€æ ·äº†ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º3ï¼›</li>
<li>obj1.aä¼šæ‰“å°å‡º2ï¼›</li>
<li>æœ€åå°±æ˜¯è€ƒå¯Ÿthisç»‘å®šçš„ä¼˜å…ˆçº§äº†ï¼Œnew ç»‘å®šæ˜¯æ¯”éšå¼ç»‘å®šä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥ä¼šè¾“å‡º4ã€‚</li>
</ol>
<h3 id="15-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#15-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="15. ä»£ç è¾“å‡ºç»“æœ"></a>15. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">something</span>)&#123;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = something
&#125;

<span class="hljs-keyword">var</span> obj1 = &#123;&#125;

<span class="hljs-keyword">var</span> bar = foo.<span class="hljs-title function_">bind</span>(obj1);
<span class="hljs-title function_">bar</span>(<span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">a</span>); <span class="hljs-comment">// 2</span>

<span class="hljs-keyword">var</span> baz = <span class="hljs-keyword">new</span> <span class="hljs-title function_">bar</span>(<span class="hljs-number">3</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">a</span>); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(baz.<span class="hljs-property">a</span>); <span class="hljs-comment">// 3</span></code></pre></div>

<p>è¾“å‡ºç»“æœï¼š 2  2  3</p>
<p>è¿™é“é¢˜ç›®å’Œä¸Šé¢é¢˜ç›®å·®ä¸å¤šï¼Œä¸»è¦éƒ½æ˜¯è€ƒå¯Ÿthisç»‘å®šçš„ä¼˜å…ˆçº§ã€‚è®°ä½ä»¥ä¸‹ç»“è®ºå³å¯ï¼š<strong>thisç»‘å®šçš„ä¼˜å…ˆçº§ï¼šnewç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®šã€‚</strong></p>
<h2 id="ä¸‰ã€ä½œç”¨åŸŸ-amp-å˜é‡æå‡-amp-é—­åŒ…"><a href="#ä¸‰ã€ä½œç”¨åŸŸ-amp-å˜é‡æå‡-amp-é—­åŒ…" class="headerlink" title="ä¸‰ã€ä½œç”¨åŸŸ&amp;å˜é‡æå‡&amp;é—­åŒ…"></a>ä¸‰ã€ä½œç”¨åŸŸ&amp;å˜é‡æå‡&amp;é—­åŒ…</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#1-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript">(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
   <span class="hljs-keyword">var</span> x = y = <span class="hljs-number">1</span>;
&#125;)();
<span class="hljs-keyword">var</span> z;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(y); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(z); <span class="hljs-comment">// undefined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); <span class="hljs-comment">// Uncaught ReferenceError: x is not defined</span></code></pre></div>

<p>è¿™æ®µä»£ç çš„å…³é”®åœ¨äºï¼švar x &#x3D; y &#x3D; 1; å®é™…ä¸Šè¿™é‡Œæ˜¯ä»å³å¾€å·¦æ‰§è¡Œçš„ï¼Œé¦–å…ˆæ‰§è¡Œy &#x3D; 1, å› ä¸ºyæ²¡æœ‰ä½¿ç”¨varå£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç„¶åç¬¬äºŒæ­¥æ˜¯å°†yèµ‹å€¼ç»™xï¼Œè®²ä¸€ä¸ªå…¨å±€å˜é‡èµ‹å€¼ç»™äº†ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæœ€ç»ˆï¼Œxæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œyæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€ä»¥æ‰“å°xæ˜¯æŠ¥é”™ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#2-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a, b
(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b);
   <span class="hljs-keyword">var</span> a = (b = <span class="hljs-number">3</span>);
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b);   
&#125;)()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b);</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-literal">undefined</span> 
<span class="hljs-literal">undefined</span> 
<span class="hljs-number">3</span> 
<span class="hljs-number">3</span> 
<span class="hljs-literal">undefined</span> 
<span class="hljs-number">3</span></code></pre></div>

<p>è¿™ä¸ªé¢˜ç›®å’Œä¸Šé¢é¢˜ç›®è€ƒå¯Ÿçš„çŸ¥è¯†ç‚¹ç±»ä¼¼ï¼Œbèµ‹å€¼ä¸º3ï¼Œbæ­¤æ—¶æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œå°†3èµ‹å€¼ç»™aï¼Œaæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥æœ€åæ‰“å°çš„æ—¶å€™ï¼Œaä»æ—§æ˜¯undefinedã€‚</p>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#3-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ"></a>3. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> friendName = <span class="hljs-string">&#x27;World&#x27;</span>;
(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> friendName === <span class="hljs-string">&#x27;undefined&#x27;</span>) &#123;
    <span class="hljs-keyword">var</span> friendName = <span class="hljs-string">&#x27;Jack&#x27;</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Goodbye &#x27;</span> + friendName);
  &#125; <span class="hljs-keyword">else</span> &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello &#x27;</span> + friendName);
  &#125;
&#125;)();</code></pre></div>

<p>è¾“å‡ºç»“æœï¼šGoodbye Jack</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JavaScriptä¸­ï¼Œ Function å’Œ var éƒ½ä¼šè¢«æå‡ï¼ˆå˜é‡æå‡ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±ç›¸å½“äºï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;World!&#x27;</span>;
(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
    <span class="hljs-keyword">var</span> name;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> name === <span class="hljs-string">&#x27;undefined&#x27;</span>) &#123;
        name = <span class="hljs-string">&#x27;Jack&#x27;</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Goodbye &#x27;</span> + name);
    &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello &#x27;</span> + name);
    &#125;
&#125;)();</code></pre></div>

<p>è¿™æ ·ï¼Œç­”æ¡ˆå°±ä¸€ç›®äº†ç„¶äº†ã€‚</p>
<h3 id="4-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#4-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ"></a>4. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn1</span>(<span class="hljs-params"></span>)&#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;fn1&#x27;</span>)
&#125;
<span class="hljs-keyword">var</span> fn2
 
<span class="hljs-title function_">fn1</span>()
<span class="hljs-title function_">fn2</span>()
 
fn2 = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;fn2&#x27;</span>)
&#125;
 
<span class="hljs-title function_">fn2</span>()</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">fn1
<span class="hljs-title class_">Uncaught</span> <span class="hljs-title class_">TypeError</span>: fn2 is not a <span class="hljs-keyword">function</span>
fn2</code></pre></div>

<p>è¿™é‡Œä¹Ÿæ˜¯åœ¨è€ƒå¯Ÿå˜é‡æå‡ï¼Œå…³é”®åœ¨äºç¬¬ä¸€ä¸ªfn2()ï¼Œè¿™æ—¶fn2ä»æ˜¯ä¸€ä¸ªundefinedçš„å˜é‡ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™fn2ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>
<h3 id="5-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#5-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="5. ä»£ç è¾“å‡ºç»“æœ"></a>5. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-keyword">var</span> temp = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params"></span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(temp); <span class="hljs-comment">// 10</span>
    &#125;
    <span class="hljs-title function_">b</span>();
&#125;
<span class="hljs-title function_">a</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-keyword">var</span> temp = <span class="hljs-number">10</span>;
    <span class="hljs-title function_">b</span>();
&#125;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(temp); <span class="hljs-comment">// æŠ¥é”™ Uncaught ReferenceError: temp is not defined</span>
&#125;
<span class="hljs-title function_">a</span>();</code></pre></div>

<p>åœ¨ä¸Šé¢çš„ä¸¤æ®µä»£ç ä¸­ï¼Œç¬¬ä¸€æ®µæ˜¯å¯ä»¥æ­£å¸¸è¾“å‡ºï¼Œè¿™ä¸ªåº”è¯¥æ²¡å•¥é—®é¢˜ï¼Œå…³é”®åœ¨äºç¬¬äºŒæ®µä»£ç ï¼Œå®ƒä¼šæŠ¥é”™Uncaught ReferenceError: temp is not definedã€‚è¿™æ—¶å› ä¸ºåœ¨bæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œtemp çš„å€¼ä¸ºundefinedã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#6-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ"></a>6. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a=<span class="hljs-number">3</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">c</span>(<span class="hljs-params"></span>)&#123;
   <span class="hljs-title function_">alert</span>(a);
&#125;
(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
 <span class="hljs-keyword">var</span> a=<span class="hljs-number">4</span>;
 <span class="hljs-title function_">c</span>();
&#125;)();</code></pre></div>

<p>jsä¸­å˜é‡çš„ä½œç”¨åŸŸé“¾ä¸å®šä¹‰æ—¶çš„ç¯å¢ƒæœ‰å…³ï¼Œä¸æ‰§è¡Œæ—¶æ— å…³ã€‚æ‰§è¡Œç¯å¢ƒåªä¼šæ”¹å˜thisã€ä¼ é€’çš„å‚æ•°ã€å…¨å±€å˜é‡ç­‰</p>
<h3 id="7-ä»£ç è¾“å‡ºé—®é¢˜"><a href="#7-ä»£ç è¾“å‡ºé—®é¢˜" class="headerlink" title="7.  ä»£ç è¾“å‡ºé—®é¢˜"></a>7.  ä»£ç è¾“å‡ºé—®é¢˜</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fun</span>(<span class="hljs-params">n, o</span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(o)
  <span class="hljs-keyword">return</span> &#123;
    <span class="hljs-attr">fun</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>)&#123;
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fun</span>(m, n);
    &#125;
  &#125;;
&#125;
<span class="hljs-keyword">var</span> a = <span class="hljs-title function_">fun</span>(<span class="hljs-number">0</span>);  a.<span class="hljs-title function_">fun</span>(<span class="hljs-number">1</span>);  a.<span class="hljs-title function_">fun</span>(<span class="hljs-number">2</span>);  a.<span class="hljs-title function_">fun</span>(<span class="hljs-number">3</span>);
<span class="hljs-keyword">var</span> b = <span class="hljs-title function_">fun</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">fun</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">fun</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">fun</span>(<span class="hljs-number">3</span>);
<span class="hljs-keyword">var</span> c = <span class="hljs-title function_">fun</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">fun</span>(<span class="hljs-number">1</span>);  c.<span class="hljs-title function_">fun</span>(<span class="hljs-number">2</span>);  c.<span class="hljs-title function_">fun</span>(<span class="hljs-number">3</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-literal">undefined</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>  <span class="hljs-number">0</span>
<span class="hljs-literal">undefined</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>
<span class="hljs-literal">undefined</span>  <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">1</span></code></pre></div>

<p>è¿™æ˜¯ä¸€é“å…³äºé—­åŒ…çš„é¢˜ç›®ï¼Œå¯¹äºfunæ–¹æ³•ï¼Œè°ƒç”¨ä¹‹åè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå½“è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ å…¥çš„å®å‚æ¯”å‡½æ•°å£°æ˜æ—¶æŒ‡å®šçš„å½¢å‚ä¸ªæ•°è¦å°‘ï¼Œå‰©ä¸‹çš„å½¢å‚éƒ½å°†è®¾ç½®ä¸ºundefinedå€¼ã€‚æ‰€ä»¥ <code>console.log(o);</code> ä¼šè¾“å‡ºundefinedã€‚è€Œaå°±æ˜¯æ˜¯fun(0)è¿”å›çš„é‚£ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°funä¸­å‚æ•° n çš„å€¼æ˜¯0ï¼Œè€Œè¿”å›çš„é‚£ä¸ªå¯¹è±¡ä¸­ï¼Œéœ€è¦ä¸€ä¸ªå‚æ•°nï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­æ²¡æœ‰nï¼Œå®ƒå°±ç»§ç»­æ²¿ç€ä½œç”¨åŸŸå‘ä¸Šä¸€çº§çš„ä½œç”¨åŸŸä¸­å¯»æ‰¾nï¼Œæœ€ååœ¨å‡½æ•°funä¸­æ‰¾åˆ°äº†nï¼Œnçš„å€¼æ˜¯0ã€‚äº†è§£äº†è¿™ä¸€ç‚¹ï¼Œå…¶ä»–è¿ç®—å°±å¾ˆç®€å•äº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<h3 id="8-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#8-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="8. ä»£ç è¾“å‡ºç»“æœ"></a>8. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript">f = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;;   
g = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;;   
(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;   
   <span class="hljs-keyword">if</span> (<span class="hljs-title function_">g</span>() &amp;&amp; [] == ![]) &#123;   
      f = <span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;;   
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">g</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;   
   &#125;   
&#125;)();   
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">f</span>());</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š false</p>
<p>è¿™é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªå˜é‡få’Œgï¼Œæˆ‘ä»¬çŸ¥é“å˜é‡æ˜¯å¯ä»¥é‡æ–°èµ‹å€¼çš„ã€‚åé¢æ˜¯ä¸€ä¸ªåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œåœ¨ if æ¡ä»¶ä¸­è°ƒç”¨äº†å‡½æ•° g()ï¼Œç”±äºåœ¨åŒ¿åå‡½æ•°ä¸­ï¼Œåˆé‡æ–°å®šä¹‰äº†å‡½æ•°gï¼Œå°±è¦†ç›–äº†å¤–éƒ¨å®šä¹‰çš„å˜é‡gï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œè°ƒç”¨çš„æ˜¯å†…éƒ¨å‡½æ•° g æ–¹æ³•ï¼Œè¿”å›ä¸º trueã€‚ç¬¬ä¸€ä¸ªæ¡ä»¶é€šè¿‡ï¼Œè¿›å…¥ç¬¬äºŒä¸ªæ¡ä»¶ã€‚</p>
<p>ç¬¬äºŒä¸ªæ¡ä»¶æ˜¯[] &#x3D;&#x3D; ![]ï¼Œå…ˆçœ‹ ![] ï¼Œåœ¨ JavaScript ä¸­ï¼Œå½“ç”¨äºå¸ƒå°”è¿ç®—æ—¶ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œï¼Œå¯¹è±¡çš„éç©ºå¼•ç”¨è¢«è§†ä¸º trueï¼Œç©ºå¼•ç”¨ null åˆ™è¢«è§†ä¸º falseã€‚ç”±äºè¿™é‡Œä¸æ˜¯ä¸€ä¸ª null, è€Œæ˜¯ä¸€ä¸ªæ²¡æœ‰å…ƒç´ çš„æ•°ç»„ï¼Œæ‰€ä»¥ [] è¢«è§†ä¸º true, è€Œ ![] çš„ç»“æœå°±æ˜¯ false äº†ã€‚å½“ä¸€ä¸ªå¸ƒå°”å€¼å‚ä¸åˆ°æ¡ä»¶è¿ç®—çš„æ—¶å€™ï¼Œtrue ä¼šè¢«çœ‹ä½œ 1, è€Œ false ä¼šè¢«çœ‹ä½œ 0ã€‚ç°åœ¨æ¡ä»¶å˜æˆäº† [] &#x3D;&#x3D; 0 çš„é—®é¢˜äº†ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‚ä¸æ¡ä»¶æ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒä¼šè¢«æ±‚å€¼ï¼Œæ±‚å€¼çš„ç»“æœæ˜¯æ•°ç»„æˆä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ[] çš„ç»“æœå°±æ˜¯ â€˜â€™ ï¼Œè€Œ â€˜â€™ ä¼šè¢«å½“ä½œ 0 ï¼Œæ‰€ä»¥ï¼Œæ¡ä»¶æˆç«‹ã€‚</p>
<p>ä¸¤ä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œæ¡ä»¶ä¸­çš„ä»£ç ï¼Œ f åœ¨å®šä¹‰æ˜¯æ²¡æœ‰ä½¿ç”¨varï¼Œæ‰€ä»¥ä»–æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å› æ­¤ï¼Œè¿™é‡Œä¼šé€šè¿‡é—­åŒ…è®¿é—®åˆ°å¤–éƒ¨çš„å˜é‡ f, é‡æ–°èµ‹å€¼ï¼Œç°åœ¨æ‰§è¡Œ f å‡½æ•°è¿”å›å€¼å·²ç»æˆä¸º false äº†ã€‚è€Œ g åˆ™ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°å†…å®šä¹‰çš„ gï¼Œä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„ g å‡½æ•°ã€‚æ‰€ä»¥æœ€åçš„ç»“æœå°±æ˜¯ falseã€‚</p>
<h2 id="å››ã€åŸå‹-amp-ç»§æ‰¿"><a href="#å››ã€åŸå‹-amp-ç»§æ‰¿" class="headerlink" title="å››ã€åŸå‹&amp;ç»§æ‰¿"></a>å››ã€åŸå‹&amp;ç»§æ‰¿</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#1-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) &#123;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
&#125;
<span class="hljs-keyword">var</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&#x27;king&#x27;</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property">__proto__</span>) <span class="hljs-comment">//Person.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>) <span class="hljs-comment">//Object.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>) <span class="hljs-comment">// null</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>)<span class="hljs-comment">//nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>)<span class="hljs-comment">//nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property">constructor</span>)<span class="hljs-comment">//Person</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)<span class="hljs-comment">//undefined p2æ˜¯å®ä¾‹ï¼Œæ²¡æœ‰prototypeå±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property">constructor</span>)<span class="hljs-comment">//Function ä¸€ä¸ªç©ºå‡½æ•°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)<span class="hljs-comment">//æ‰“å°å‡ºPerson.prototypeè¿™ä¸ªå¯¹è±¡é‡Œæ‰€æœ‰çš„æ–¹æ³•å’Œå±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>)<span class="hljs-comment">//Person</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>)<span class="hljs-comment">// Object.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property">__proto__</span>) <span class="hljs-comment">//Function.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>)<span class="hljs-comment">//Object.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property">__proto__</span>)<span class="hljs-comment">//Function.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property">__proto__</span>)<span class="hljs-comment">//Function.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>)<span class="hljs-comment">//null</span></code></pre></div>

<p>è¿™é“ä¹‰é¢˜ç›®è€ƒå¯ŸåŸå‹ã€åŸå‹é“¾çš„åŸºç¡€ï¼Œè®°ä½å°±å¯ä»¥äº†ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#2-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// a</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Foo</span> () &#123;
 getName = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
 &#125;
 <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
&#125;
<span class="hljs-comment">// b</span>
<span class="hljs-title class_">Foo</span>.<span class="hljs-property">getName</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
&#125;
<span class="hljs-comment">// c</span>
<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getName</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
&#125;
<span class="hljs-comment">// d</span>
<span class="hljs-keyword">var</span> getName = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>);
&#125;
<span class="hljs-comment">// e</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getName</span> () &#123;
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">5</span>);
&#125;

<span class="hljs-title class_">Foo</span>.<span class="hljs-title function_">getName</span>();           <span class="hljs-comment">// 2</span>
<span class="hljs-title function_">getName</span>();               <span class="hljs-comment">// 4</span>
<span class="hljs-title class_">Foo</span>().<span class="hljs-title function_">getName</span>();         <span class="hljs-comment">// 1</span>
<span class="hljs-title function_">getName</span>();               <span class="hljs-comment">// 1 </span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>.<span class="hljs-title function_">getName</span>();       <span class="hljs-comment">// 2</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>().<span class="hljs-title function_">getName</span>();     <span class="hljs-comment">// 3</span>
<span class="hljs-keyword">new</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>().<span class="hljs-title function_">getName</span>(); <span class="hljs-comment">// 3</span></code></pre></div>

<p>è¾“å‡ºç»“æœï¼š2  4  1  1  2  3  3</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li><strong>Foo.getName()ï¼Œ</strong> Fooä¸ºä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå¯¹è±¡éƒ½å¯ä»¥æœ‰å±æ€§ï¼Œb å¤„å®šä¹‰Fooçš„getNameå±æ€§ä¸ºå‡½æ•°ï¼Œè¾“å‡º2ï¼›</li>
<li><strong>getName()ï¼Œ</strong> è¿™é‡Œçœ‹dã€eå¤„ï¼Œdä¸ºå‡½æ•°è¡¨è¾¾å¼ï¼Œeä¸ºå‡½æ•°å£°æ˜ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºå˜é‡æå‡ï¼Œå‡½æ•°å£°æ˜çš„ 5 ä¼šè¢«åè¾¹å‡½æ•°è¡¨è¾¾å¼çš„ 4 è¦†ç›–ï¼›</li>
<li>** Foo().getName()ï¼Œ** è¿™é‡Œè¦çœ‹aå¤„ï¼Œåœ¨Fooå†…éƒ¨å°†å…¨å±€çš„getNameé‡æ–°èµ‹å€¼ä¸º console.log(1) çš„å‡½æ•°ï¼Œæ‰§è¡ŒFoo()è¿”å› thisï¼Œè¿™ä¸ªthisæŒ‡å‘windowï¼ŒFoo().getName() å³ä¸ºwindow.getName()ï¼Œè¾“å‡º 1ï¼›</li>
<li><strong>getName()ï¼Œ</strong> ä¸Šé¢3ä¸­ï¼Œå…¨å±€çš„getNameå·²ç»è¢«é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥è¿™é‡Œä¾ç„¶è¾“å‡º 1ï¼›</li>
<li><strong>new Foo.getName()ï¼Œ</strong> è¿™é‡Œç­‰ä»·äº new (Foo.getName())ï¼Œå…ˆæ‰§è¡Œ Foo.getName()ï¼Œè¾“å‡º 2ï¼Œç„¶ånewä¸€ä¸ªå®ä¾‹ï¼›</li>
<li><strong>new Foo().getName()ï¼Œ</strong> è¿™ é‡Œç­‰ä»·äº (new Foo()).getName(), å…ˆnewä¸€ä¸ªFooçš„å®ä¾‹ï¼Œå†æ‰§è¡Œè¿™ä¸ªå®ä¾‹çš„getNameæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªå®ä¾‹æœ¬èº«æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥å»åŸå‹é“¾__protot__ä¸Šè¾¹æ‰¾ï¼Œå®ä¾‹.<strong>protot</strong> &#x3D;&#x3D;&#x3D; Foo.prototypeï¼Œæ‰€ä»¥è¾“å‡º 3ï¼›</li>
<li><strong>new new Foo().getName()ï¼Œ</strong> è¿™é‡Œç­‰ä»·äºnew (new Foo().getName())ï¼Œå¦‚ä¸Šè¿°6ï¼Œå…ˆè¾“å‡º 3ï¼Œç„¶ånew ä¸€ä¸ª new Foo().getName() çš„å®ä¾‹ã€‚</li>
</ol>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#3-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ"></a>3. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;&#125;;
<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">a</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;a&#x27;</span>);
&#125;;
<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">b</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;b&#x27;</span>);
&#125;
<span class="hljs-keyword">var</span> f = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
f.<span class="hljs-title function_">a</span>();
f.<span class="hljs-title function_">b</span>();
F.<span class="hljs-title function_">a</span>();
F.<span class="hljs-title function_">b</span>()</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">a
<span class="hljs-title class_">Uncaught</span> <span class="hljs-title class_">TypeError</span>: f.<span class="hljs-property">b</span> is not a <span class="hljs-keyword">function</span>
a
b</code></pre></div>

<p><strong>è§£æï¼š</strong></p>
<ol>
<li>f å¹¶ä¸æ˜¯ Function çš„å®ä¾‹ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œè°ƒç”¨çš„æ˜¯ Function åŸå‹é“¾ä¸Šçš„ç›¸å…³å±æ€§å’Œæ–¹æ³•ï¼Œåªèƒ½è®¿é—®åˆ° Object åŸå‹é“¾ã€‚æ‰€ä»¥ f.a() è¾“å‡º a ï¼Œè€Œ f.b() å°±æŠ¥é”™äº†ã€‚</li>
<li>F æ˜¯ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œ F æ˜¯æ„é€ å‡½æ•° Function çš„ä¸€ä¸ªå®ä¾‹ã€‚å› ä¸º F instanceof Object &#x3D;&#x3D;&#x3D; trueï¼ŒF instanceof Function &#x3D;&#x3D;&#x3D; trueï¼Œç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®ºï¼šF æ˜¯ Object å’Œ Function ä¸¤ä¸ªçš„å®ä¾‹ï¼Œå³ F èƒ½è®¿é—®åˆ° aï¼Œ ä¹Ÿèƒ½è®¿é—®åˆ° bã€‚æ‰€ä»¥ F.a() è¾“å‡º a ï¼ŒF.b() è¾“å‡º bã€‚</li>
</ol>
<h3 id="4-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#4-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ"></a>4. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Foo</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-title class_">Foo</span>.<span class="hljs-property">a</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
    &#125;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>)
    &#125;
&#125;

<span class="hljs-title class_">Foo</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">a</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
&#125;

<span class="hljs-title class_">Foo</span>.<span class="hljs-property">a</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">4</span>);
&#125;

<span class="hljs-title class_">Foo</span>.<span class="hljs-title function_">a</span>();
<span class="hljs-keyword">let</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>();
obj.<span class="hljs-title function_">a</span>();
<span class="hljs-title class_">Foo</span>.<span class="hljs-title function_">a</span>();</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š4 2 1</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>Foo.a() è¿™ä¸ªæ˜¯è°ƒç”¨ Foo å‡½æ•°çš„é™æ€æ–¹æ³• aï¼Œè™½ç„¶ Foo ä¸­æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å±æ€§æ–¹æ³• aï¼Œä½† Foo æ­¤æ—¶æ²¡æœ‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æ­¤æ—¶è¾“å‡º Foo çš„é™æ€æ–¹æ³• a çš„ç»“æœï¼š4</li>
<li>let obj &#x3D; new Foo(); ä½¿ç”¨äº† new æ–¹æ³•è°ƒç”¨äº†å‡½æ•°ï¼Œè¿”å›äº†å‡½æ•°å®ä¾‹å¯¹è±¡ï¼Œæ­¤æ—¶ Foo å‡½æ•°å†…éƒ¨çš„å±æ€§æ–¹æ³•åˆå§‹åŒ–ï¼ŒåŸå‹é“¾å»ºç«‹ã€‚</li>
<li>obj.a() ; è°ƒç”¨ obj å®ä¾‹ä¸Šçš„æ–¹æ³• aï¼Œè¯¥å®ä¾‹ä¸Šç›®å‰æœ‰ä¸¤ä¸ª a æ–¹æ³•ï¼šä¸€ä¸ªæ˜¯å†…éƒ¨å±æ€§æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯åŸå‹ä¸Šçš„æ–¹æ³•ã€‚å½“è¿™ä¸¤è€…éƒ½å­˜åœ¨æ—¶ï¼Œé¦–å…ˆæŸ¥æ‰¾ ownProperty ï¼Œå¦‚æœæ²¡æœ‰æ‰å»åŸå‹é“¾ä¸Šæ‰¾ï¼Œæ‰€ä»¥è°ƒç”¨å®ä¾‹ä¸Šçš„ a è¾“å‡ºï¼š2</li>
<li>Foo.a() ; æ ¹æ®ç¬¬2æ­¥å¯çŸ¥ Foo å‡½æ•°å†…éƒ¨çš„å±æ€§æ–¹æ³•å·²åˆå§‹åŒ–ï¼Œè¦†ç›–äº†åŒåçš„é™æ€æ–¹æ³•ï¼Œæ‰€ä»¥è¾“å‡ºï¼š1</li>
</ol>
<h3 id="5-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#5-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="5. ä»£ç è¾“å‡ºç»“æœ"></a>5. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params"></span>) &#123;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;puppy&#x27;</span>
&#125;
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">bark</span> = <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;woof!woof!&#x27;</span>)
&#125;
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Dog</span> &amp;&amp; dog.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Dog</span> &amp;&amp; dog <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Dog</span>)</code></pre></div>

<p>è¾“å‡ºç»“æœï¼štrue</p>
<p><strong>è§£æï¼š</strong> å› ä¸ºconstructoræ˜¯prototypeä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥dog.constructorå®é™…ä¸Šå°±æ˜¯æŒ‡å‘Dog.prototype.constructorï¼›constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°ã€‚instanceofè€Œå®é™…æ£€æµ‹çš„æ˜¯ç±»å‹æ˜¯å¦åœ¨å®ä¾‹çš„åŸå‹é“¾ä¸Šã€‚</p>
<p>constructoræ˜¯prototypeä¸Šçš„å±æ€§ï¼Œè¿™ä¸€ç‚¹å¾ˆå®¹æ˜“è¢«å¿½ç•¥æ‰ã€‚constructorå’Œinstanceof çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œæ„Ÿæ€§åœ°æ¥è¯´ï¼Œconstructorçš„é™åˆ¶æ¯”è¾ƒä¸¥æ ¼ï¼Œå®ƒåªèƒ½ä¸¥æ ¼å¯¹æ¯”å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯ä¸æ˜¯æŒ‡å®šçš„å€¼ï¼›è€Œinstanceofæ¯”è¾ƒæ¾æ•£ï¼Œåªè¦æ£€æµ‹çš„ç±»å‹åœ¨åŸå‹é“¾ä¸Šï¼Œå°±ä¼šè¿”å›trueã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#6-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ"></a>6. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> A = &#123;<span class="hljs-attr">n</span>: <span class="hljs-number">4399</span>&#125;;
<span class="hljs-keyword">var</span> B =  <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span> = <span class="hljs-number">9999</span>&#125;;
<span class="hljs-keyword">var</span> C =  <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> n = <span class="hljs-number">8888</span>&#125;;
B.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = A;
C.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = A;
<span class="hljs-keyword">var</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title function_">B</span>();
<span class="hljs-keyword">var</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title function_">C</span>();
A.<span class="hljs-property">n</span>++
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b.<span class="hljs-property">n</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">n</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š9999  4400</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>console.log(b.n)ï¼Œåœ¨æŸ¥æ‰¾b.næ˜¯é¦–å…ˆæŸ¥æ‰¾ b å¯¹è±¡è‡ªèº«æœ‰æ²¡æœ‰ n å±æ€§ï¼Œå¦‚æœæ²¡æœ‰ä¼šå»åŸå‹ï¼ˆprototypeï¼‰ä¸ŠæŸ¥æ‰¾ï¼Œå½“æ‰§è¡Œvar b &#x3D; new B()æ—¶ï¼Œå‡½æ•°å†…éƒ¨this.n&#x3D;9999(æ­¤æ—¶thisæŒ‡å‘ b) è¿”å›bå¯¹è±¡ï¼Œbå¯¹è±¡æœ‰è‡ªèº«çš„nå±æ€§ï¼Œæ‰€ä»¥è¿”å› 9999ã€‚</li>
<li>console.log(c.n)ï¼ŒåŒç†ï¼Œå½“æ‰§è¡Œvar c &#x3D; new C()æ—¶ï¼Œcå¯¹è±¡æ²¡æœ‰è‡ªèº«çš„nå±æ€§ï¼Œå‘ä¸ŠæŸ¥æ‰¾ï¼Œæ‰¾åˆ°åŸå‹ ï¼ˆprototypeï¼‰ä¸Šçš„ n å±æ€§ï¼Œå› ä¸º A.n++(æ­¤æ—¶å¯¹è±¡Aä¸­çš„nä¸º4400)ï¼Œ æ‰€ä»¥è¿”å›4400ã€‚</li>
</ol>
<h3 id="7-ä»£ç è¾“å‡ºé—®é¢˜-1"><a href="#7-ä»£ç è¾“å‡ºé—®é¢˜-1" class="headerlink" title="7. ä»£ç è¾“å‡ºé—®é¢˜"></a>7. ä»£ç è¾“å‡ºé—®é¢˜</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">A</span>(<span class="hljs-params"></span>)&#123;
&#125;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">B</span>(<span class="hljs-params">a</span>)&#123;
ã€€ã€€<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = a;
&#125;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">C</span>(<span class="hljs-params">a</span>)&#123;
ã€€ã€€<span class="hljs-keyword">if</span>(a)&#123;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = a;
ã€€ã€€&#125;
&#125;
A.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
B.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
C.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>().<span class="hljs-property">a</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">B</span>().<span class="hljs-property">a</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">C</span>(<span class="hljs-number">2</span>).<span class="hljs-property">a</span>);</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š1  undefined  2</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>console.log(new A().a)ï¼Œnew A()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œæœ¬èº«æ²¡æœ‰aå±æ€§ï¼Œæ‰€ä»¥å‘å®ƒçš„åŸå‹å»æ‰¾ï¼Œå‘ç°åŸå‹çš„aå±æ€§çš„å±æ€§å€¼ä¸º1ï¼Œæ•…è¯¥è¾“å‡ºå€¼ä¸º1ï¼›</li>
<li>console.log(new B().a)ï¼Œew B()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°æœ‰å‚æ•°aï¼Œä½†è¯¥å¯¹è±¡æ²¡æœ‰ä¼ å‚ï¼Œæ•…è¯¥è¾“å‡ºå€¼ä¸ºundefined;</li>
<li>console.log(new C(2).a)ï¼Œnew C()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°æœ‰å‚æ•°aï¼Œä¸”ä¼ çš„å®å‚ä¸º2ï¼Œæ‰§è¡Œå‡½æ•°å†…éƒ¨ï¼Œå‘ç°ifä¸ºçœŸï¼Œæ‰§è¡Œthis.a &#x3D; 2,æ•…å±æ€§açš„å€¼ä¸º2ã€‚</li>
</ol>
<h3 id="8-ä»£ç è¾“å‡ºé—®é¢˜-1"><a href="#8-ä»£ç è¾“å‡ºé—®é¢˜-1" class="headerlink" title="8 ä»£ç è¾“å‡ºé—®é¢˜"></a>8 ä»£ç è¾“å‡ºé—®é¢˜</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">b</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">c</span> = &#123; <span class="hljs-attr">demo</span>: <span class="hljs-number">5</span> &#125;;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">show</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> , <span class="hljs-variable language_">this</span>.<span class="hljs-property">b</span> , <span class="hljs-variable language_">this</span>.<span class="hljs-property">c</span>.<span class="hljs-property">demo</span> );
    &#125;
&#125;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"></span>) &#123;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = <span class="hljs-number">2</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">change</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">b</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">b</span>.<span class="hljs-property">length</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">c</span>.<span class="hljs-property">demo</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>++;
    &#125;
&#125;

<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();
<span class="hljs-keyword">var</span> parent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();
<span class="hljs-keyword">var</span> child1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();
<span class="hljs-keyword">var</span> child2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();
child1.<span class="hljs-property">a</span> = <span class="hljs-number">11</span>;
child2.<span class="hljs-property">a</span> = <span class="hljs-number">12</span>;
parent.<span class="hljs-title function_">show</span>();
child1.<span class="hljs-title function_">show</span>();
child2.<span class="hljs-title function_">show</span>();
child1.<span class="hljs-title function_">change</span>();
child2.<span class="hljs-title function_">change</span>();
parent.<span class="hljs-title function_">show</span>();
child1.<span class="hljs-title function_">show</span>();
child2.<span class="hljs-title function_">show</span>();</code></pre></div>

<p>è¾“å‡ºç»“æœï¼š</p>
<div class="code-wrapper"><pre><code class="hljs javascript">parent.<span class="hljs-title function_">show</span>(); <span class="hljs-comment">// 1  [1,2,1] 5</span>

child1.<span class="hljs-title function_">show</span>(); <span class="hljs-comment">// 11 [1,2,1] 5</span>
child2.<span class="hljs-title function_">show</span>(); <span class="hljs-comment">// 12 [1,2,1] 5</span>

parent.<span class="hljs-title function_">show</span>(); <span class="hljs-comment">// 1 [1,2,1] 5</span>

child1.<span class="hljs-title function_">show</span>(); <span class="hljs-comment">// 5 [1,2,1,11,12] 5</span>

child2.<span class="hljs-title function_">show</span>(); <span class="hljs-comment">// 6 [1,2,1,11,12] 5</span></code></pre></div>

<p>è¿™é“é¢˜ç›®å€¼å¾—ç¥å¸ï¼Œä»–æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¾‹å¦‚<strong>thisçš„æŒ‡å‘ã€åŸå‹ã€åŸå‹é“¾ã€ç±»çš„ç»§æ‰¿ã€æ•°æ®ç±»å‹</strong>ç­‰ã€‚</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>parent.show()ï¼Œå¯ä»¥ç›´æ¥è·å¾—æ‰€éœ€çš„å€¼ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼›</li>
<li>child1.show()ï¼Œ<code>Child</code>çš„æ„é€ å‡½æ•°åŸæœ¬æ˜¯æŒ‡å‘<code>Child</code>çš„ï¼Œé¢˜ç›®æ˜¾å¼å°†<code>Child</code>ç±»çš„åŸå‹å¯¹è±¡æŒ‡å‘äº†<code>Parent</code>ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œéœ€è¦æ³¨æ„<code>Child.prototype</code>æŒ‡å‘çš„æ˜¯<code>Parent</code>çš„å®ä¾‹<code>parent</code>ï¼Œè€Œä¸æ˜¯æŒ‡å‘<code>Parent</code>è¿™ä¸ªç±»ã€‚</li>
<li>child2.show()ï¼Œè¿™ä¸ªä¹Ÿæ²¡å•¥å¥½è¯´çš„ï¼›</li>
<li>parent.show()ï¼Œ<code>parent</code>æ˜¯ä¸€ä¸ª<code>Parent</code>ç±»çš„å®ä¾‹ï¼Œ<code>Child.prorotype</code>æŒ‡å‘çš„æ˜¯<code>Parent</code>ç±»çš„å¦ä¸€ä¸ªå®ä¾‹ï¼Œä¸¤è€…åœ¨å †å†…å­˜ä¸­äº’ä¸å½±å“ï¼Œæ‰€ä»¥ä¸Šè¿°æ“ä½œä¸å½±å“<code>parent</code>å®ä¾‹ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸å˜ï¼›</li>
<li>child1.show()ï¼Œ<code>child1</code>æ‰§è¡Œäº†<code>change()</code>æ–¹æ³•åï¼Œå‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–å‘¢?</li>
</ol>
<ul>
<li><strong>this.b.push(this.a)ï¼Œ**ç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œthis.bä¼šæŒ‡å‘<code>Child.prototype</code>ä¸Šçš„**b**æ•°ç»„,this.aä¼šæŒ‡å‘<code>child1</code>çš„</strong>a<strong>å±æ€§,æ‰€ä»¥<code>Child.prototype.b</code>å˜æˆäº†</strong>[1,2,1,11]**;</li>
<li>**this.a &#x3D; this.b.lengthï¼Œ*<em>è¿™æ¡è¯­å¥ä¸­<code>this.a</code>å’Œ<code>this.b</code>çš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸º<code>child1.a</code>å˜ä¸º*<em>4</em></em>;</li>
<li><strong>this.c.demo &#x3D; this.a++ï¼Œ**ç”±äº<code>child1</code>è‡ªèº«å±æ€§å¹¶æ²¡æœ‰**c**è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„<code>this.c</code>ä¼šæŒ‡å‘<code>Child.prototype.c</code>ï¼Œ<code>this.a</code>å€¼ä¸º</strong>4<strong>ï¼Œä¸ºåŸå§‹ç±»å‹ï¼Œæ•…èµ‹å€¼æ“ä½œæ—¶ä¼šç›´æ¥èµ‹å€¼ï¼Œ<code>Child.prototype.c.demo</code>çš„ç»“æœä¸º</strong>4<strong>ï¼Œè€Œ<code>this.a</code>éšåè‡ªå¢ä¸º</strong>5(4 + 1 &#x3D; 5)ã€‚**</li>
</ul>
<ol>
<li><code>child2</code>æ‰§è¡Œäº†<code>change()</code>æ–¹æ³•, è€Œ<code>child2</code>å’Œ<code>child1</code>å‡æ˜¯<code>Child</code>ç±»çš„å®ä¾‹ï¼Œæ‰€ä»¥ä»–ä»¬çš„åŸå‹é“¾æŒ‡å‘åŒä¸€ä¸ªåŸå‹å¯¹è±¡<code>Child.prototype</code>,ä¹Ÿå°±æ˜¯åŒä¸€ä¸ª<code>parent</code>å®ä¾‹ï¼Œæ‰€ä»¥<code>child2.change()</code>ä¸­æ‰€æœ‰å½±å“åˆ°åŸå‹å¯¹è±¡çš„è¯­å¥éƒ½ä¼šå½±å“<code>child1</code>çš„æœ€ç»ˆè¾“å‡ºç»“æœã€‚</li>
</ol>
<ul>
<li><strong>this.b.push(this.a)ï¼Œ**ç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œthis.bä¼šæŒ‡å‘<code>Child.prototype</code>ä¸Šçš„**b**æ•°ç»„,this.aä¼šæŒ‡å‘<code>child2</code>çš„</strong>a<strong>å±æ€§,æ‰€ä»¥<code>Child.prototype.b</code>å˜æˆäº†</strong>[1,2,1,11,12]**;</li>
<li>**this.a &#x3D; this.b.lengthï¼Œ*<em>è¿™æ¡è¯­å¥ä¸­<code>this.a</code>å’Œ<code>this.b</code>çš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸º<code>child2.a</code>å˜ä¸º*<em>5</em></em>;</li>
<li><strong>this.c.demo &#x3D; this.a++ï¼Œ**ç”±äº<code>child2</code>è‡ªèº«å±æ€§å¹¶æ²¡æœ‰**c**è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„<code>this.c</code>ä¼šæŒ‡å‘<code>Child.prototype.c</code>ï¼Œæ•…æ‰§è¡Œç»“æœä¸º<code>Child.prototype.c.demo</code>çš„å€¼å˜ä¸º<code>child2.a</code>çš„å€¼</strong>5<strong>ï¼Œè€Œ<code>child2.a</code>æœ€ç»ˆè‡ªå¢ä¸º</strong>6(5 + 1 &#x3D; 6)ã€‚**</li>
</ul>
<h3 id="9-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#9-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="9. ä»£ç è¾“å‡ºç»“æœ"></a>9. ä»£ç è¾“å‡ºç»“æœ</h3><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SuperType</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">property</span> = <span class="hljs-literal">true</span>;
&#125;

<span class="hljs-title class_">SuperType</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getSuperValue</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">property</span>;
&#125;;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SubType</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subproperty</span> = <span class="hljs-literal">false</span>;
&#125;

<span class="hljs-title class_">SubType</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SuperType</span>();
<span class="hljs-title class_">SubType</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getSubValue</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">subproperty</span>;
&#125;;

<span class="hljs-keyword">var</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubType</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance.<span class="hljs-title function_">getSuperValue</span>());</code></pre></div>

<p>è¾“å‡ºç»“æœï¼štrue</p>
<p>å®é™…ä¸Šï¼Œè¿™æ®µä»£ç å°±æ˜¯åœ¨å®ç°åŸå‹é“¾ç»§æ‰¿ï¼ŒSubTypeç»§æ‰¿äº†SuperTypeï¼Œæœ¬è´¨æ˜¯é‡å†™äº†SubTypeçš„åŸå‹å¯¹è±¡ï¼Œä»£ä¹‹ä»¥ä¸€ä¸ªæ–°ç±»å‹çš„å®ä¾‹ã€‚SubTypeçš„åŸå‹è¢«é‡å†™äº†ï¼Œæ‰€ä»¥instance.constructoræŒ‡å‘çš„æ˜¯SuperTypeã€‚å…·ä½“å¦‚ä¸‹ï¼š <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" srcset="/blog/img/loading.gif" lazyload alt="image.png"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/blog/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" class="category-chain-item">å‰ç«¯é¢è¯•é¢˜</a>
  
  
    <span>></span>
    
  <a href="/blog/categories/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/javascript/" class="category-chain-item">javascript</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/blog/tags/javascript/">#javascript</a>
      
    </div>
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/blog/interview-performance.html" title="é¢è¯•é¢˜æ±‡æ€»ä¹‹æ€§èƒ½ä¼˜åŒ–">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">é¢è¯•é¢˜æ±‡æ€»ä¹‹æ€§èƒ½ä¼˜åŒ–</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/blog/interview-HandwriteenCode.html" title="é¢è¯•é¢˜æ±‡æ€»ä¹‹æ‰‹å†™ä»£ç ">
                        <span class="hidden-mobile">é¢è¯•é¢˜æ±‡æ€»ä¹‹æ‰‹å†™ä»£ç </span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>æ«ğŸå·</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>å‰ç«¯å°ç™½</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

  
  
  
</div>
<script type="text/javascript" src="/js/click-love.js"></script>
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/blog/js/events.js" ></script>
<script  src="/blog/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/blog/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/blog/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/blog/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
<script src="/blog/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/blog/live2dw/assets/chitose.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
